<!DOCTYPE html>
<!-- saved from url=(0066)https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<link rel="apple-touch-icon" href="https://s2.ta.kingoftime.jp/images/iPhone_home_icon_kot.png">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Cache-Control" content="no-cache">
<meta http-equiv="Expires" content="-1">
<meta name="msapplication-config" content="none">
<meta name="robots" content="noindex,nofollow">
<meta name="google-site-verification" content="iezf0UApKmz5LFxwan6O-8_xmc0JhWhW0vVUa39zPZ8">

<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>KING OF TIME Attendance Management
</title>
<link type="text/css" rel="stylesheet" href="./KING OF TIME Attendance Management3_files/jquery-ui.min.css">
<link type="text/css" rel="stylesheet" href="./KING OF TIME Attendance Management3_files/base.kot.css">
<link type="text/css" rel="stylesheet" href="./KING OF TIME Attendance Management3_files/block.kot.css">
<!--
UIテンプレート範囲外のスタイル用
class指定のprefixは「specific-」
-->
<link type="text/css" rel="stylesheet" href="./KING OF TIME Attendance Management3_files/specific.kot.css">
<script type="text/javascript" async="" src="./KING OF TIME Attendance Management3_files/analytics.js.download"></script><script type="text/javascript" async="" src="./KING OF TIME Attendance Management3_files/js"></script><script type="text/javascript" async="" src="./KING OF TIME Attendance Management3_files/js(1)"></script><script type="text/javascript" async="" src="./KING OF TIME Attendance Management3_files/js(2)"></script><script async="" src="./KING OF TIME Attendance Management3_files/main.js.download" id="techtouch-snippet"></script><script async="" src="./KING OF TIME Attendance Management3_files/gtm.js.download"></script><script type="text/javascript">
var ua = navigator.userAgent;
if(ua.match("Trident") || ua.match("MSIE") ){
document.write('<link rel="stylesheet" href="\/asset\/design1\/css\/ie.kot.css?202312121215">');
}
</script>
<link type="text/css" rel="stylesheet" href="./KING OF TIME Attendance Management3_files/en.css">
<script src="./KING OF TIME Attendance Management3_files/jquery-1.11.3.min.js.download"></script>
<script src="./KING OF TIME Attendance Management3_files/kot.js.download"></script>
<script type="text/javascript">
var browserType = KOT_GLOBAL.KOT_LIB.getBrowserType();
if(browserType <= 110){
document.write('<script src="\/asset\/design1\/js\/vendor\/flexibility.js?202312121215"><\/script>');
}
if(browserType <= 109){
$(document).ready(function() {
$(".specific-htBlock-dialog-body").scroll(function() {
var pos = $(this).scrollTop();
var posPrev = pos;
var dialog = this;
var id = setInterval(function(){
posPrev = pos;
pos = $(dialog).scrollTop();
if(pos == posPrev){
$(dialog).hide().show();
$(dialog).scrollTop(pos);
clearInterval(id);
}
},500);
});
});
}
</script>
<script type="text/javascript">
<!--
var jsMsgArray = [];
jsMsgArray["date_today"]                    = "Appointed day";
jsMsgArray["date_next"]                     = "Next day";
jsMsgArray["date_prev"]                     = "Previous day";
jsMsgArray["kot_ckdbclick"]                 = "Please press the button only once";
jsMsgArray["tablesort_linkCell"]            = "Click to sort the category name";
jsMsgArray["pagingcontrol_display_confirm"] = "Display may take a while if there are a many display numbers. Proceed?";
jsMsgArray["pagingcontrol_confirm_dialog"]  = "If you change before save your changes will not be reflected. Okay to proceed?";
jsMsgArray["update_string"]                 = "Update";
jsMsgArray["none_string"] = "None";
jsMsgArray["exsists_string"] = "Yes";
jsMsgArray["network_error_string"] = "Failed to data acquisition";
jsMsgArray["click_to_detail"] = "More details";
jsMsgArray["validate_string_input_error_message_for_encode"] = "Deprecated characters have been entered.";
jsMsgArray["loading_modal_message_default"] = "Please wait a moment...";
jsMsgArray["validate_number_input_error_message_upper_bound"] = "Value ​​exceeds upper limit regulation standards";
jsMsgArray["sso_confirm_message"] = "The single sign-on to the KING OF TIME series will be disconnected.\n Proceed?";
jsMsgArray["hour"]                                     = "Hr.";
jsMsgArray["min"]                                      = "Min.";
jsMsgArray["title_schedule_break_start"]               = "Start break schedule";
jsMsgArray["title_schedule_break_end"]                 = "End break schedule";
jsMsgArray["title_schedule_break_start_caption"]               = "Start break:";
jsMsgArray["title_schedule_break_end_caption"]                 = "End break:";
jsMsgArray["tiphelp_schedule_break_start"]             = "";
jsMsgArray["tiphelp_schedule_break_end"]               = "";
var globalTemp = window.KOT_GLOBAL || {};
globalTemp.HT_LIB_I18N = {
"htlib_001": "Jan",
"htlib_002": "Feb",
"htlib_003": "Mar",
"htlib_004": "Apr",
"htlib_005": "May",
"htlib_006": "Jun",
"htlib_007": "Jul",
"htlib_008": "Aug",
"htlib_009": "Sep",
"htlib_010": "Oct",
"htlib_011": "Nov",
"htlib_012": "Dec",
"htlib_013": "Sun",
"htlib_014": "Mon",
"htlib_015": "Tue",
"htlib_016": "Wed",
"htlib_017": "Thu",
"htlib_018": "Fri",
"htlib_019": "Sat",
"htlib_020": "",
"htlib_021": "",
"htlib_022": "Click row for action"
};
window.KOT_GLOBAL = globalTemp;
//--->
</script>
<!-- Data for Google Tag Manager -->
<script>
dataLayer = [{
'pageId' : '/working/working_edit',
'adminId': '',
'userType': 'employee',
'companyId': '900060596'
}];
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-WDS55BP');</script>
<!-- End Google Tag Manager -->

<script type="text/javascript" src="./KING OF TIME Attendance Management3_files/compress.js.download"></script>

<script type="text/javascript">
var map_supplemental_working_record = null;
var map_supplemental_working_record_drop_down = null;
var map_supplemental_working_record_setting_id_by_section_id_and_schedule_type_id = null;
var map_supplemental_working_record_setting = null;
var map_supplemental_dropdown_option_setting_map = null;
var map_supplemental_dropdown_option_setting_section_info_by_masterId_map = null; //format : Map<masterSettingId , Map< sectionID, List < dropdownSettingId > > >
var map_supplemental_dropdown_option_value_section_info_by_masterId_map = null; //format : Map<masterSettingId , Map< dropdownSettingId, Map<sectionId, option value > > >
var registered_section_id = null;
var registered_schedule_type_id = null;
var oneBackSchedulePatternId;
var map_regarding_work_type_map = null;
var oneBackAllDayLeaveRegardingWork;
var compress = new Compress();
var schedulePatternMap = {};
schedulePatternMap["90000058676968"] = {
schedulePatternName : "通常勤務",
schedulePatternCode : "",
scheduleTypeCode : "1",
code : "",
workDayTypeCode : "",
timeDivisionId : "",
colorCode : "ffffff",
colorCodeStr : "000000",
startTimeDayInterval : "0",
startTime : "09:00",
startTimeHour : "09",
startTimeMinute : "00",
endTimeDayInterval : "0",
endTime : "18:00",
endTimeHour : "18",
endTimeMinute : "00",
earlyWorkStartTimeDayInterval : "0",
earlyWorkStartTime : "",
earlyWorkStartTimeHour : "",
earlyWorkStartTimeMinute : "",
lateWorkEndTimeDayInterval : "0",
lateWorkEndTime : "",
lateWorkEndTimeHour : "",
lateWorkEndTimeMinute : "",
imageUploadOptionArray : [
],
breakTimeArray : [
{
startTimeDayInterval : "0",
startTime : "12:00",
startTimeHour : "12",
startTimeMinute : "00",
endTimeDayInterval : "0",
endTime : "13:00",
endTimeHour : "13",
endTimeMinute : "00"
}
],
breakMinute : "",
scheduleMultiPurposeFlag1 : "",
scheduleMultiPurposeFlag2 : "",
amPattern : {
startTimeDayInterval : "0",
startTime : "09:00",
startTimeHour : "09",
startTimeMinute : "00",
endTimeDayInterval : "0",
endTime : "13:00",
endTimeHour : "13",
endTimeMinute : "00",
earlyWorkStartTimeDayInterval : "0",
earlyWorkStartTime : "",
earlyWorkStartTimeHour : "",
earlyWorkStartTimeMinute : "",
lateWorkEndTimeDayInterval : "0",
lateWorkEndTime : "",
lateWorkEndTimeHour : "",
lateWorkEndTimeMinute : "",
breakTimeArray : [
],
breakMinute : "",
id : "90000058676966"
},
pmPattern : {
startTimeDayInterval : "0",
startTime : "14:00",
startTimeHour : "14",
startTimeMinute : "00",
endTimeDayInterval : "0",
endTime : "18:00",
endTimeHour : "18",
endTimeMinute : "00",
earlyWorkStartTimeDayInterval : "0",
earlyWorkStartTime : "",
earlyWorkStartTimeHour : "",
earlyWorkStartTimeMinute : "",
lateWorkEndTimeDayInterval : "0",
lateWorkEndTime : "",
lateWorkEndTimeHour : "",
lateWorkEndTimeMinute : "",
breakTimeArray : [
],
breakMinute : "",
id : "90000058676967"
},
id : "90000058676968"
};
(function($){
$(document).ready(
function(){
$(document).on("change", ".schedule_time_value", function(){
//TODO: #8421 submit時に行うほうが良い？
//最後が数値で終わっている
var REG = /[0-9]$/;
var id = $(this).attr("id");
var suffix = "";
if(REG.test(id)) {
suffix = id.split("_").pop();
var idArray = id.split("_");
idArray.pop();
id = idArray.join("_");
}
var hourId = id + "_hour";
var minuteId = id + "_minute";
if(suffix) {
hourId = hourId + suffix;
minuteId = minuteId + suffix;
}
var hourElement, minuteElement;
hourElement = $("#" + hourId);
minuteElement = $("#" + minuteId);
//「"_minutes"」の場合もあるので検索できなければ再度取得する
if(!minuteElement.attr("id")) {
if(suffix) {
minuteId = id + "_minutes" + suffix;
}
else {
minuteId = id + "_minutes";
}
minuteElement = $("#" + minuteId);
}
var time = $(this).val()
var convert = KOT_GLOBAL.KOT_LIB.TimeValue.timeToHourMinute(time);
hourElement.val(convert.hour);
minuteElement.val(convert.minute);
});
$(document).on('change',
'[id^=regarding_work_type_code]', function () {
// medical certificate upload input fields should be populated only for employee login
// file upload fields for hourly leaves
populateFileUploadFieldsForHourlyLeave($(this));
}
);
$(document).on('change',
'[id^=uploading_file_]', function (evt) {
'use strict' // run on strict mode
var files = Array.prototype.slice.call(evt.target.files);
var uploadingFile = files[0]; // only one file is attached to file input
var fileType = uploadingFile["type"];
var ValidImageTypes = ["image/gif", "image/jpeg", "image/png", "image/bmp"];
// compress only images. Skip PDF files
if (jQuery.inArray(fileType, ValidImageTypes) >= 0) {
// use lib to compress image.
compress.compress(files, {
size: 4, // the max size in MB, defaults to 2MB
quality: 0.75, // the quality of the image, max is 1,
maxWidth: 1920, // the max width of the output image, defaults to 1920px
maxHeight: 1920, // the max height of the output image, defaults to 1920px
resize: true // defaults to true, set false if you do not want to resize the image width and height
}).then(function (images) {
var img = images[0];
var base64str = img.data;
var compressedImageField = "compressed_image_string_"+ evt.target.name; // "compressed_image_string_uploading_file_1"
$("input[name="+compressedImageField+"]").val(base64str); // "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBg... "
}).catch(function (e) {
//console.log(e);
});
}
});
$(window).load(function(){
jQuery("[id^='timerecord_upload_']").each(function(){
var idOfSelectType = jQuery(this).attr("id");
var countSuffixOfType = idOfSelectType.split("_").pop();
var clonedTemplate = $("#timerecord_upload_container").clone();
clonedTemplate.attr("id", "timerecord_upload_container_" + countSuffixOfType + "_1");
clonedTemplate.find("#timerecord_file_upload").each(function() {
$(this).attr("name", "timerecord_file_upload_" + countSuffixOfType + "_1");
$(this).attr("id", "timerecord_file_upload_" + countSuffixOfType + "_1");
});
clonedTemplate.find("#string_compressed_image_timerecord_file_upload").each(function() {
$(this).attr("name", "string_compressed_image_timerecord_file_upload_" + countSuffixOfType + "_1");
$(this).attr("id", "string_compressed_image_timerecord_file_upload_" + countSuffixOfType+ "_1");
});
$(this).append(clonedTemplate.css("display", ""));
});
// Populate image upload fields based on selected schedule pattern
var schedulePattern = jQuery("#select_schedule_pattern_id");
populateFileUploadFields(schedulePattern);
// Populate image upload fields based on selected half Day pattern
var halfDayPattern = jQuery("#select_unit_half_day_type_code");
populateFileUploadFields(halfDayPattern);
// Populate image upload fields based on selected hourly leave types
// select all elements where element id starting with 'regarding_work_type_code' and not ending with '{{count}}'
jQuery("[id^=regarding_work_type_code]select:not([id$=\\{\\{count\\}\\}])").each(function(){
populateFileUploadFieldsForHourlyLeave($(this));
});
// Populate image upload fields based on selected vacation category
// select all elements where element id starting with 'leave_type_code' and not ending with '{{count}}'
jQuery("[id^=leave_type_code]select:not([id$=\\{\\{count\\}\\}])").each(function(){
populateFileUploadFieldsForVacationCategory($(this));
});
$( "form#working_edit_form" ).attr( "enctype", "multipart/form-data" )
document.getElementById("leave_type_code1").selectedIndex = "0";
document.getElementById("leave_type_mode1").selectedIndex = "0";
});
chBackGround(document.getElementById("select_schedule_pattern_id"));
chStrColor(document.getElementById("select_schedule_pattern_id"));
map_regarding_work_type_map = makeRegardingWorkTypeDetailsMap();
settingOptions();
setBreakBeginHtml();
setInputValue();
setSchedulePatternCondition(false);
setWorkTimeByScheduleRequestDivision();
checkSelectableHalfDaySchedule();
map_supplemental_working_record_setting_id_by_section_id_and_schedule_type_id = makeSupplementalWorkingRecordSettingBySectionIDAndScheduleTypeIdMap();
map_supplemental_working_record_setting = makeSupplementalWorkingRecordSettingMap();
map_supplemental_dropdown_option_setting_map = makeSupplementalDropdownOptionSettingMap();
map_supplemental_dropdown_option_setting_section_info_by_masterId_map = makeSupplementalDropdownOptionSectionInfoMap();
map_supplemental_dropdown_option_value_section_info_by_masterId_map = makeSupplementalDropdownOptionValueSectionInfoMap();
map_supplemental_working_record_drop_down = makeSupplementalWorkingRecordDropDownMap();
map_supplemental_working_record = makeSupplementalWorkingRecordMap();
setRegisteredSectionId();
setRegisteredScheduleTypeId();
setSupplementalWorkingRecordSettingEvents();
$(document).on('change',
'#select_scheduled_section_id', function () {
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '-1');
}
);
$(document).on('change',
'#select_schedule_pattern_id,#select_unit_half_day_type_code',
function(){
checkSelectableHalfDaySchedule();
settingScheduleTimes(true, true);
// Populate file uploading fields for Full day schedule patterns and Half day leave types
populateFileUploadFields($(this));
if($(this).attr("id") == "select_schedule_pattern_id") {
chBackGround(this);
chStrColor(this);
settingOptions();
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '-1');
}
});
$(document).on('blur',
'#select_schedule_pattern_id,#select_unit_half_day_type_code',
function(){
if(navigator.userAgent.indexOf('MSIE 6') > 0) {
checkSelectableHalfDaySchedule();
if($(this).attr("id") == "select_schedule_pattern_id") {
chBackGround(this);
chStrColor(this);
settingOptions();
settingScheduleTimes(true, true);
}
}
}
);
if(submitButtonArray && submitButtonArray.length > 0) {
timerId = setTimeout('timewaitWithButton(\'\', 0, 1, 1)', 0);
}
$(document).on("change",
"div.schedule_start_time,div.schedule_end_time,div.early_work_start_time,div.late_work_end_time,div.break_times,div.schedule_break_minute",
function(){
if (isSchedulePatternReset(this)) {
$("#select_schedule_pattern_id").val("");
//パターンを選んだ際に設定されている半休のみ選択可能にする
checkSelectableHalfDaySchedule();
chBackGround(document.getElementById("select_schedule_pattern_id"));
chStrColor(document.getElementById("select_schedule_pattern_id"));
settingOptions();
document.getElementById("select_schedule_pattern_td").style.backgroundColor = "#FFFF99";
}
}
);
$(document).on('change', '.recording_timestamp_date', function(){
var date = $(this).val();
var convert = KOT_GLOBAL.KOT_LIB.DateValue.dateToYearMonthDay(date);
var suffix = $(this).attr("id").split("_").pop();
$("#recording_timestamp_year_" + suffix).val(convert.year);
$("#recording_timestamp_month_" + suffix).val(convert.month);
$("#recording_timestamp_day_" + suffix).val(convert.day);
});
$(document).on('blur', '.recording_timestamp_time', function() {
if($(this).closest("tr").css("display") == "none") {
return;
}
var time = $(this).val();
// #11374 34時（翌10時）までの入力を許容する
var convert = KOT_GLOBAL.KOT_LIB.TimeValue.timeToHourMinute(time, 11);
var suffix = $(this).attr("id").split("_").pop();
$("#recording_timestamp_hour_" + suffix).val(convert.hour);
$("#recording_timestamp_minute_" + suffix).val(convert.minute);
});
$(document).on('change',
'[id^=timerecord_file_upload_]', function (evt) {
'use strict' // run on strict mode
var files = Array.prototype.slice.call(evt.target.files);
var fileUpload = files[0]; // only one file is attached to file input
var fileType = fileUpload["type"];
var validImageTypes = ["image/gif", "image/jpeg", "image/png", "image/bmp"];
// compress only images. Skip PDF files
if (jQuery.inArray(fileType, validImageTypes) >= 0) {
// use lib to compress image.
compress.compress(files, {
size: 4, // the max size in MB, defaults to 2MB
quality: 0.75, // the quality of the image, max is 1,
maxWidth: 1920, // the max width of the output image, defaults to 1920px
maxHeight: 1920, // the max height of the output image, defaults to 1920px
resize: true // defaults to true, set false if you do not want to resize the image width and height
}).then(function (images) {
var img = images[0];
var base64str = img.data;
var compressedImageField = "string_compressed_image_"+ evt.target.name; // "string_compressed_image_timerecord_file_upload_1"
$("input[name="+compressedImageField+"]").val(base64str); // "/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBg... "
}).catch(function (e) {
//console.log(e);
});
}
});
$(document).on('change',
'[id^=recording_type_code_]', function () {
var idOfSelectType = jQuery(this).attr("id");
loadUploadFileOnTimestamp(idOfSelectType);
});
}); /* end ready */
})(jQuery);
var halfDayScheduleCondtitionMap = {};
halfDayScheduleCondtitionMap[90000058676968] = 3;
// 半休種別の選択条件：「半休設定のあるスケジュールパターンのみ半休選択が可能」の場合、
// スケジュールパターンの設定に応じて、半休の項目を非活性とする
function checkSelectableHalfDaySchedule() {
}
function submitFunction() {
var earlyWorkStartTimeDay = document.getElementById("early_work_start_time_day");
var lateWorkEndTimeDay = document.getElementById("late_work_end_time_day");
if (earlyWorkStartTimeDay != null) {
document.getElementById("early_work_start_time_day_hidden").value = earlyWorkStartTimeDay.value;
}
if (lateWorkEndTimeDay != null) {
document.getElementById("late_work_end_time_day_hidden").value = lateWorkEndTimeDay.value;
}
return ckdbclick();
}
function chBackGround(e) {
if (e==null) return false;
e.style.backgroundColor = e.options[e.selectedIndex].style.backgroundColor;
if (e.value != "") {
e.options[0].style.backgroundColor = "#fff";
}
else {
e.style.backgroundColor = "";
e.options[0].style.backgroundColor = "";
}
}
function chStrColor(e) {
if (e==null) return false;
e.style.color = e.options[e.selectedIndex].style.color;
if (e.value != "") {
e.options[0].style.color = "#000000";
}
else {
e.style.color = "";
e.options[0].style.color = "";
}
}
function sendSubmit(e) {
if (!e) {
var e = window.event;
}
if(e.keyCode == 13) {
$(".recording_timestamp_time").blur();
if($("#action_02").length > 0) {
$("#action_02").click();
}
else if($("#action_01").length > 0) {
$("#action_01").click();
}
return;
}
}
function setRegardingWorkTypeCodeOptions(allDayLeaveRegardingWork) {
}
function setTimeDivisionIdOptions(allDayLeaveRegardingWork) {
}
function setWorkDayTypeCodeOptions(allDayLeaveRegardingWork) {
var selectWorkTypeCode = document.getElementById('select_work_day_type_code');
if (selectWorkTypeCode) {
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var schedulePatternWorkingTypeCode = (schedulePatternMap[schedulePatternId]) ? schedulePatternMap[schedulePatternId].workDayTypeCode : "";
//全日休暇の強制設定がある場合
if (allDayLeaveRegardingWork != null && allDayLeaveRegardingWork.workDayTypeCode != "") {
schedulePatternWorkingTypeCode = parseInt(allDayLeaveRegardingWork.workDayTypeCode, 10);
}
if (schedulePatternWorkingTypeCode) {
selectWorkTypeCode.options.length = 0;
selectWorkTypeCode.options.length++;
var optionString = "Weekday";
var optionValue = "1";
if (schedulePatternWorkingTypeCode == 2) {
optionString = "Legal time-off";
optionValue = "2";
}
else if (schedulePatternWorkingTypeCode == 3) {
optionString = "Non-legal time-off";
optionValue = "3";
}
selectWorkTypeCode.options[0].text = optionString;
selectWorkTypeCode.options[0].value = optionValue;
selectWorkTypeCode.options[0].selected = true;
}
else {
var selectedValue = selectWorkTypeCode.options[selectWorkTypeCode.selectedIndex].value;
selectWorkTypeCode.options.length = 0;
selectWorkTypeCode.options.length++;
selectWorkTypeCode.options[0].text = "--";
selectWorkTypeCode.options[0].value = "";
selectWorkTypeCode.options.length++;
selectWorkTypeCode.options[1].text = "Weekday";
selectWorkTypeCode.options[1].value = "1";
if (selectedValue == 1) {
selectWorkTypeCode.options[1].selected = true;
}
selectWorkTypeCode.options.length++;
selectWorkTypeCode.options[2].text = "Legal time-off";
selectWorkTypeCode.options[2].value = "2";
if (selectedValue == 2) {
selectWorkTypeCode.options[2].selected = true;
}
selectWorkTypeCode.options.length++;
selectWorkTypeCode.options[3].text = "Non-legal time-off";
selectWorkTypeCode.options[3].value = "3";
if (selectedValue == 3) {
selectWorkTypeCode.options[3].selected = true;
}
}
}
}
function resetOptions(allDayLeaveRegardingWork) {
var selectedSchedulePatternTd = document.getElementById("select_schedule_pattern_td");
if(selectedSchedulePatternTd){
selectedSchedulePatternTd.style.backgroundColor = "#F5F5F5";
}
if (oneBackSchedulePatternId || oneBackAllDayLeaveRegardingWork) {
var schedulePatternWorkingTypeCode = (schedulePatternMap[oneBackSchedulePatternId]) ? schedulePatternMap[oneBackSchedulePatternId].workDayTypeCode : "";
if (oneBackAllDayLeaveRegardingWork != null && oneBackAllDayLeaveRegardingWork.workDayTypeCode != "") {
schedulePatternWorkingTypeCode = parseInt(oneBackAllDayLeaveRegardingWork.workDayTypeCode, 10);
}
if (schedulePatternWorkingTypeCode) {
var selectWorkTypeCode = document.getElementById('select_work_day_type_code');
selectWorkTypeCode.options[selectWorkTypeCode.selectedIndex].value = 0;
}
}
oneBackSchedulePatternId = jQuery("#select_schedule_pattern_id").val();
oneBackAllDayLeaveRegardingWork = allDayLeaveRegardingWork;
}
function loadUiElementsAccordingToSWRSettingType(nameOfSelectElement) {
if (nameOfSelectElement != 'supplemental_working_record_setting_{{count_supplemental_working_record}}') {
var countSuffixOfElement = nameOfSelectElement.split("_").pop();
var timeSpanElementId = "time_span_element_"+countSuffixOfElement;
var numericTypeElementId = "numeric_element_"+countSuffixOfElement;
var dropdownTypeElementId = "drop_down_element_"+countSuffixOfElement;
var emptyElementId = "empty_element_"+countSuffixOfElement;
var selectedOptionValue = jQuery('#' + nameOfSelectElement).find(":selected").val();
if(isNaN(selectedOptionValue)){
var inputType = selectedOptionValue.split("_").pop();
var settingId = selectedOptionValue.split("_").shift();
if(!isNaN(inputType)){
var inputTypeVal = Number(inputType);
if(inputType == 1 ){
jQuery('#'+ timeSpanElementId).show();
jQuery('#'+ numericTypeElementId).hide();
jQuery('#'+ dropdownTypeElementId).hide();
jQuery('#'+ emptyElementId).hide();
}else if (inputType == 2){
var settingIdValue = Number(settingId);
if(map_supplemental_working_record_setting != null){
var settingObject = map_supplemental_working_record_setting[settingIdValue];
var numericElement = settingObject.numericEle;
if(numericElement != null){
//logic for displaying unit types as prefix or suffix.
var unitTypeVal = numericElement.unitType;
var numOfDecimalPoints = numericElement.numOfDecimalPlaces;
var numericUnitTypeLabelElementId = "numeric_unit_type_label_"+countSuffixOfElement;
var numericTypeValueElementId = "numeric_type_value_"+countSuffixOfElement;
var unitTypeElementId = "numeric_unit_type_"+countSuffixOfElement;
jQuery('#'+ unitTypeElementId).val(unitTypeVal);
jQuery('#'+ numericUnitTypeLabelElementId).show();
var valueFieldMaxLength = 8;
if(numOfDecimalPoints != null && Number(numOfDecimalPoints) > 0){
valueFieldMaxLength = 9 + Number(numOfDecimalPoints);
}
jQuery('#'+ numericTypeValueElementId).prop('maxLength', valueFieldMaxLength);
var decodeVal = KOT_GLOBAL.KOT_LIB.decodeEscapeHTML(unitTypeVal) != null ? KOT_GLOBAL.KOT_LIB.decodeEscapeHTML(unitTypeVal) : '';
jQuery('#'+ numericUnitTypeLabelElementId).text(decodeVal);
}
}
jQuery('#'+ timeSpanElementId).hide();
jQuery('#'+ numericTypeElementId).show();
jQuery('#'+ dropdownTypeElementId).hide();
jQuery('#'+ emptyElementId).hide();
}else if (inputType == 3){
var settingIdValue = Number(settingId);
if(map_supplemental_working_record_setting != null){
var settingObject = map_supplemental_working_record_setting[settingIdValue];
var dropdownElement = settingObject.dropdownEle;
if(dropdownElement != null){
var masterSettingID = settingIdValue;
//set allowed dropdown option settings to dropdown box.
var optionSectionInfoMap
= map_supplemental_dropdown_option_setting_section_info_by_masterId_map[masterSettingID];
var optionValueInfoMap
= map_supplemental_dropdown_option_value_section_info_by_masterId_map[masterSettingID];
if(optionSectionInfoMap != null && optionValueInfoMap != null){
var selected_section_id = getSelectedSectionId();
if(selected_section_id != null){
var allowedSettingIdList = optionSectionInfoMap[selected_section_id];
if(allowedSettingIdList != null && allowedSettingIdList.length > 0){
var dropdownSelectElementId = "drop_down_option_"+countSuffixOfElement;
jQuery('#' + dropdownSelectElementId).empty();
//check already saved item or not.
var saved_dropdown_setting_id = null;
var saved_dropdown_option_element = document.getElementById("selected_drop_down_option_setting_id_"+countSuffixOfElement);
if(saved_dropdown_option_element != null){
saved_dropdown_setting_id = saved_dropdown_option_element.value;
}
jQuery.each(allowedSettingIdList, function (index, value) {
var dropdown_setting = map_supplemental_dropdown_option_setting_map[value];
var dropdown_setting_section_value_map = optionValueInfoMap[value];
var dropdown_setting_value = dropdown_setting_section_value_map[selected_section_id];
var val = dropdown_setting.id;
var description = dropdown_setting.name ;
if(saved_dropdown_setting_id != null && saved_dropdown_setting_id == value){
var optionHtml = jQuery("<option>").val(val).prop('selected', true).text(description);
}else{
var optionHtml = jQuery("<option>").val(val).text(description);
}
jQuery('#' + dropdownSelectElementId).append(optionHtml);
});
}else{
var dropdownSelectElementId = "drop_down_option_"+countSuffixOfElement;
var dropdownOptionSettingId = map_supplemental_working_record_drop_down[countSuffixOfElement];
//#12968 - [201710_A05]出勤所属を変更して、選択肢の値がなくてしまう
//show already saved option when no option load with selected clockin division
if(dropdownOptionSettingId != null){
var dropdownOptionSetting = map_supplemental_dropdown_option_setting_map[dropdownOptionSettingId];
if(dropdownOptionSetting != null){
var val = dropdownOptionSettingId;
var description = dropdownOptionSetting.name;
var optionHtml = jQuery("<option>").val(val).prop('selected', true).text(description);
jQuery('#' + dropdownSelectElementId).empty();
jQuery('#' + dropdownSelectElementId).append(optionHtml);
} else {
var optionHtml = jQuery("<option>").val(-1).prop('selected', true).text("--You cannot select any option--");
jQuery('#' + dropdownSelectElementId).empty();
jQuery('#' + dropdownSelectElementId).append(optionHtml);
}
} else {
var optionHtml = jQuery("<option>").val(-1).prop('selected', true).text("--You cannot select any option--");
jQuery('#' + dropdownSelectElementId).empty();
jQuery('#' + dropdownSelectElementId).append(optionHtml);
}
}
}
}else{
var dropdownSelectElementId = "drop_down_option_"+countSuffixOfElement;
var optionHtml = jQuery("<option>").val(-1).prop('selected', true).text("--You cannot select any option--");
jQuery('#' + dropdownSelectElementId).empty();
jQuery('#' + dropdownSelectElementId).append(optionHtml);
}
}
}
jQuery('#'+ timeSpanElementId).hide();
jQuery('#'+ numericTypeElementId).hide();
jQuery('#'+ dropdownTypeElementId).show();
jQuery('#'+ emptyElementId).hide();
}
}
}else{
if(Number(selectedOptionValue) == 0){
jQuery('#'+ timeSpanElementId).hide();
jQuery('#'+ numericTypeElementId).hide();
jQuery('#'+ dropdownTypeElementId).hide();
jQuery('#'+ emptyElementId).show();
}
}
}
}
//adding events for supplemental working record setting select box
function setSupplementalWorkingRecordSettingEvents () {
jQuery("select[id^='supplemental_working_record_setting_']").each(function(){
var nameOfSelectElement = jQuery(this).attr("name");
loadUiElementsAccordingToSWRSettingType(nameOfSelectElement);
});
jQuery("select[id^='supplemental_working_record_setting_']").each(function(){
jQuery(this).change(function(){
var nameOfSelectElement = jQuery(this).attr("name");
loadUiElementsAccordingToSWRSettingType(nameOfSelectElement);
});
});
jQuery('.htBlock-numeric-value').each(function(index,element){
if (element.id != 'numeric_type_value_{{count_supplemental_working_record}}') {
KOT_GLOBAL.KOT_LIB.NumericValue.validateNumericValue(element.id);
}
});
}
/**
* select_element_prefix - 'supplemental_working_record_setting_*'
* exact_match - When we add a new record, exact_match = true and select_element_prefix exact select element id
* exact_schedule_type_id - can use this variable if you want to filter-out the supplemental work drop down from a scheduled pattern other than the selected one
**/
function updateSupplementalWorkingRecordSettingMasterData(select_element_prefix, exact_match, exact_schedule_type_id) {
if(map_supplemental_working_record_setting_id_by_section_id_and_schedule_type_id != null && map_supplemental_working_record_setting != null ) {
var selected_schedule_pattern_id_val = jQuery('#select_schedule_pattern_id').val();
var selected_section_id_in_schedule_val = jQuery('#select_scheduled_section_id').val();
var selected_schedule_pattern_id = selected_schedule_pattern_id_val == "" ? 0 : selected_schedule_pattern_id_val;
var selected_section_id_in_schedule = selected_section_id_in_schedule_val == "" ? registered_section_id : selected_section_id_in_schedule_val;
var schedule_pattern = schedulePatternMap[selected_schedule_pattern_id];
if(select_element_prefix != null && selected_section_id_in_schedule) {
var mode1 = $("#leave_type_mode1").val();
var mode2 = $("#leave_type_mode2").val();
if("" == mode1) {
mode1 = -1;
}
if(0 == mode1 || 1 == mode2 || (2 == mode1 && 3 == mode2) || (3 == mode1 && 2 == mode2)) {
exact_schedule_type_id = 3;
}
var selected_schedule_type_id = exact_schedule_type_id != "-1" ? exact_schedule_type_id
: (schedule_pattern != null ? schedule_pattern.scheduleTypeCode : (registered_schedule_type_id != null ? registered_schedule_type_id : selected_schedule_pattern_id));
var setting_id_list = map_supplemental_working_record_setting_id_by_section_id_and_schedule_type_id[selected_section_id_in_schedule + '_' + selected_schedule_type_id]; //valid setting id list for selected sectionId_scheduleTypeId
var add_new_button_element = jQuery('#supplemental_working_record_add_new_button_div');
if (setting_id_list != null) {
var reg_ex_for_select_element = exact_match ? 'select[id="' + select_element_prefix + '"]' : 'select[id^="' + select_element_prefix + '"]';
jQuery(reg_ex_for_select_element).each(function (index, select_element) {
var existing_valid_setting_id_list = new Array();
if (select_element.id != 'supplemental_working_record_setting_{{count_supplemental_working_record}}') { //bypass default working record element
var selected_setting_id = Number(jQuery('#' + select_element.id).find(":selected").val().split('_')[0]);
var selected_swr_setting = map_supplemental_working_record_setting[selected_setting_id]; //get currently selected swr item from dropdown
jQuery('#' + select_element.id + ' > option').each(function () { //Iterate option item by option item of the selected dropdown
var setting_id = Number(this.value.split('_')[0]);
if (setting_id_list != null) {
var status = jQuery.inArray(setting_id, setting_id_list);
if (status < 0) { //if setting id is not in valid setting id list and not equal to selected setting id, then remove option items from dropdown
if (setting_id != selected_setting_id) {
jQuery('#' + select_element.id + ' option[value="' + this.value + '"]').remove();
}
} else { //if setting id is in the valid list, move to temporary list
existing_valid_setting_id_list.push(status);
}
}
});
//if the existing ids are available, the dropdown options will be regenerated
if (setting_id_list != null && existing_valid_setting_id_list != null) {
var optionInitialHtml = null;
jQuery('#' + select_element.id + ' option[value="' + 0 + '"]').remove();
if (setting_id_list.length > 0 || existing_valid_setting_id_list.length > 0) {
add_new_button_element.show();
var setting_id = Number(this.value.split('_')[0]);
//select --select-- option to default, when no selected item.
if (selected_setting_id == 0 || setting_id != selected_setting_id || exact_match) {
var optionText = "--Please select--";
optionInitialHtml = jQuery("<option>").val(0).prop('selected', true).text(optionText); //--Select--
}
} else {
add_new_button_element.hide();
var optionText = "--There are no Supplement working record items you can select--";
optionInitialHtml = jQuery("<option>").val(0).prop('selected', true).text(optionText); //--No SWR to select--
}
if (optionInitialHtml != null) {
jQuery('#' + select_element.id).prepend(jQuery(optionInitialHtml));
jQuery('#' + select_element.id).prop('selectedIndex', 0);
}
//Process temporary setting id list and add them to dropdown
jQuery.each(setting_id_list, function (index, value) {
var status = jQuery.inArray(index, existing_valid_setting_id_list);
if (status < 0) {
var swr_setting = map_supplemental_working_record_setting[value];
var selected_element_length = "supplemental_working_record_setting_".length;
var selected_swr_record_id = select_element.id.substr(selected_element_length);
var swr_saved_setting_id = map_supplemental_working_record[selected_swr_record_id];
var val = swr_setting.record_id + "_" + swr_setting.input_type_id;
//If selected swr setting, add only valid swr records according to the input type
if (selected_swr_setting != null && swr_setting.input_type_id == selected_swr_setting.input_type_id && selected_setting_id == swr_setting.record_id ) {
//select as default existing saved item
var optionHtml = jQuery("<option>").val(val).prop("selected", true).text(swr_setting.setting_name); //--SWR Name--
}else if( swr_saved_setting_id == null && (selected_swr_setting == null  || selected_setting_id != swr_setting.record_id)){
//just adding item only, without any select
var optionHtml = jQuery("<option>").val(val).text(swr_setting.setting_name);//--SWR Name--
}else if( swr_saved_setting_id != null && swr_setting.input_type_id == selected_swr_setting.input_type_id){
//adding same input type item only, without any select
var optionHtml = jQuery("<option>").val(val).text(swr_setting.setting_name);//--SWR Name--
}
jQuery('#' + select_element.id).append(optionHtml);
}
});
}
}
});
} else { // if no valid setting ids, them hide the new button and remove other setting options from the dropdown except selected option
add_new_button_element.hide();
jQuery('select[id^="' + select_element_prefix + '"]').each(function (index, select_element) {
if (select_element.id != 'supplemental_working_record_setting_{{count_supplemental_working_record}}') {
var setting_id = Number(this.value.split('_')[0]);
var selected_setting_id = Number(jQuery('#' + select_element.id).find(":selected").val().split('_')[0]);
var selected_swr_setting = map_supplemental_working_record_setting[selected_setting_id];
var optionInitialHtml = "<option value='0'>" + "--There are no Supplement working record items you can select--" + "</option>"; //--No SWR to select--
if (setting_id != selected_setting_id) {
jQuery('#' + select_element.id).empty().append(optionInitialHtml);
} else {
var swr_setting = map_supplemental_working_record_setting[setting_id];
if (swr_setting != null) {
var val = swr_setting.record_id + "_" + swr_setting.input_type_id;
//If selected swr setting, add only valid swr records according to the input type
if (selected_swr_setting != null && swr_setting.input_type_id == selected_swr_setting.input_type_id || selected_swr_setting == null) {
var optionHtml = jQuery("<option>").val(val).text(swr_setting.setting_name); //--SWR Name--
jQuery('#' + select_element.id).empty().append(optionHtml);
}
} else {
jQuery('#' + select_element.id).empty().append(optionInitialHtml);
}
}
}
});
}
}
}
}
function settingOptions() {
var allDayLeaveRegardingWork = getSelectedAllDayLeaveRegardingWork();
resetOptions(allDayLeaveRegardingWork);
setWorkDayTypeCodeOptions(allDayLeaveRegardingWork);
setTimeDivisionIdOptions(allDayLeaveRegardingWork);
setRegardingWorkTypeCodeOptions(allDayLeaveRegardingWork);
if (allDayLeaveRegardingWork != null && allDayLeaveRegardingWork.forceResetScheduleOptions == "1") {
KOT_GLOBAL.KOT_LIB.scheduleMultiPurposeFlagForceDisabled(document.getElementById("schedule_multi_purpose_flag1"), document.getElementById("schedule_multi_purpose_flag2"));
}
else {
KOT_GLOBAL.KOT_LIB.scheduleMultiPurposeFlagForceSetting(schedulePatternMap[$("#select_schedule_pattern_id").val()], document.getElementById("schedule_multi_purpose_flag1"), document.getElementById("schedule_multi_purpose_flag2"));
}
}
// 201806-A10 選択された休暇が全日休暇なら休暇区分設定を返す
function getSelectedAllDayLeaveRegardingWork() {
// スケジュールパターンに全日休暇パターンが選択されている場合は、全日休暇にしない
var schedulePatternId = $("#select_schedule_pattern_id").val();
if (schedulePatternMap[schedulePatternId] && schedulePatternMap[schedulePatternId].scheduleTypeCode == 3) {
return null;
}
var allDayLeaveRegardingWork = null;
var amHalfLeaveRegardingWork = null;
var pmHalfLeaveRegardingWork = null;
var counter = $("#leave_type_counter").val();
for (i = 1; i <= counter; i++) {
if ($("#leave_type_code" + i).val() != "") {
var leaveTypeCodeArray = $("#leave_type_code" + i).val().split("_");
var regardingWorkTypeCode = leaveTypeCodeArray[0];
var leaveTypeMode = $("#leave_type_mode" + i).val();
if (leaveTypeMode == "") {
continue;
}else if (leaveTypeMode == 0 || leaveTypeMode == 1) {
allDayLeaveRegardingWork = map_regarding_work_type_map[regardingWorkTypeCode];
break;
}else if (leaveTypeMode == 2) {
amHalfLeaveRegardingWork = map_regarding_work_type_map[regardingWorkTypeCode];
}else if (leaveTypeMode == 3) {
pmHalfLeaveRegardingWork = map_regarding_work_type_map[regardingWorkTypeCode];
}
}
}
// 全日休暇（半日×2）が選択された場合には、AM半休の休暇区分を使用
if (amHalfLeaveRegardingWork != null && pmHalfLeaveRegardingWork != null) {
allDayLeaveRegardingWork = amHalfLeaveRegardingWork;
}
return allDayLeaveRegardingWork;
}
/**
* create map for storing dropdown option setting
* against setting id
*/
function makeSupplementalDropdownOptionSettingMap(){
var swr_setting_dropdown_option_setting_map = new Object();
return swr_setting_dropdown_option_setting_map;
}
/**
* Map for storing relationship of section id and dropdown option setting id
* filtered by master setting id.
* format : Map<masterSettingId , Map< sectionID, List < dropdownSettingId > > >
*
* kingtime/entity/SupplementalDropdownOptionGroup.javaの buildDropdownOptionResult メソッド内で生成したMapをJavaScript用に変換する
*/
function makeSupplementalDropdownOptionSectionInfoMap(){
var swr_setting_dropdown_option_setting_section_info_by_masterid_map = new Object();
return swr_setting_dropdown_option_setting_section_info_by_masterid_map;
}
/**
* Map for storing relationship of supplemental working record drop down
* against drop down option id.
* format : Map<recordID, dropdownOptionSettingId>
*/
function makeSupplementalWorkingRecordDropDownMap(){
var map_swr_drop_down = new Object();
return map_swr_drop_down;
}
/**
* Map for storing relationship of supplemental working records
* against supplemental working record id.
* format : Map<recordID, swrSettingId>
*/
function makeSupplementalWorkingRecordMap(){
var map_swr = new Object();
return map_swr;
}
/**
* Map for storing relationship of section id and dropdown option value info, filtered by master setting id.
* format : Map<masterSettingId , Map< dropdownSettingId, Map<sectionId, option value > > >
*/
function makeSupplementalDropdownOptionValueSectionInfoMap(){
var swr_setting_dropdown_option_setting_value_section_info_by_masterid_map = new Object();
return swr_setting_dropdown_option_setting_value_section_info_by_masterid_map;
}
/**
* getting section id
* some times user can override existing one,
* with changing clock in division.
*/
function getSelectedSectionId() {
var selected_section_id = jQuery('#select_scheduled_section_id').val();
var selected_section_id = selected_section_id == "" || selected_section_id == null ? registered_section_id : selected_section_id;
return selected_section_id;
}
function makeSupplementalWorkingRecordSettingMap() {
var swr_setting_map = new Object();
return swr_setting_map;
}
function makeSupplementalWorkingRecordSettingBySectionIDAndScheduleTypeIdMap() {
var schedule_type_id_map_swr_settings_ids = new Object();
return schedule_type_id_map_swr_settings_ids;
}
function setRegisteredSectionId(){
registered_section_id = 900465623;
}
function setRegisteredScheduleTypeId(){
registered_schedule_type_id = 0;
}
function settingScheduleTimes(useAllDayLeaveType, forceDeleteScheduleTime) {
// A04 - ScheduleTimes should be cleared when both AM/PM leaves selected.
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
if(forceDeleteScheduleTime || (schedulePatternId != undefined && schedulePatternId != "")){
deleteScheduleTime();
setBreakHtml(useAllDayLeaveType);
}
setSchedulePatternInfo(useAllDayLeaveType);
setSchedulePatternCondition(useAllDayLeaveType);
setWorkTimeByScheduleRequestDivision();
}
// A04 - Check whether user has selected both AM/PM vacations.
function isBothAMPMLeaveSelected() {
var leaveTypeMode1Val = $("#leave_type_mode1").val();
var leaveTypeMode2Val = $("#leave_type_mode2").val();
// 2 => AMHalf-day vacation, 3 => PMHalf-day vacation
if(leaveTypeMode1Val != undefined && leaveTypeMode1Val != "" && leaveTypeMode2Val != undefined && leaveTypeMode2Val != ""){
return (leaveTypeMode1Val == 2 && leaveTypeMode2Val == 3) || (leaveTypeMode1Val == 3 && leaveTypeMode2Val == 2);
}
return false;
}
/**
* 20180612_A_09 - Medical certificate file upload for medical leave
* This method will populate file uploading fields dynamically based on selected Full Day schedule Pattern and Half Day type
*/
function populateFileUploadFields(dropdownElement){
// get selected schedule pattern id
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var pattarnObj = schedulePatternMap[schedulePatternId];
var target = $("#file_upload_section");
// check whether event is fired from the Schedule Pattern dropdown
if(dropdownElement.attr("id") == "select_schedule_pattern_id") {
//Remove all div elements starting with 'file_upload_section_template_1'
$('div[id^="file_upload_section_template_1"]').remove();
var imageUploadOptionArray = (pattarnObj) ? pattarnObj.imageUploadOptionArray : [];
var imageUploadOptionLen = imageUploadOptionArray.length;
if(imageUploadOptionLen > 0){
for (i = 0; i < imageUploadOptionLen; i++) {
var imageUploadOption = imageUploadOptionArray[i];
if(imageUploadOption.imageUploadOption ==0 || imageUploadOption.imageUploadOption ==1){
// draw new dev based on the selected schedule pattern
var clonedTemplate = $("#file_upload_section_template").clone();
clonedTemplate.attr("id", "file_upload_section_template_1_"+(i+1));
clonedTemplate.find("#uploading_file").each(function() {
$(this).attr("id", "uploading_file_1_"+(i+1));
$(this).attr("name", "uploading_file_1_"+(i+1));
});
clonedTemplate.find("#compressed_image_string").each(function() {
$(this).attr("name", "compressed_image_string_uploading_file_1_"+(i+1));
});
clonedTemplate.find("#display_name").each(function() {
$(this).attr("name", "display_name_uploading_file_1_"+(i+1));
$(this).val(imageUploadOption.regardingWorkTypeName);
});
clonedTemplate.find("#regarding_work_type_code").each(function() {
$(this).attr("name", "regarding_work_type_code_uploading_file_1_"+(i+1));
$(this).val(imageUploadOption.regardingWorkTypeCode);
});
clonedTemplate.find("#leave_type_name").text(imageUploadOption.regardingWorkTypeName);
target.append(clonedTemplate.css("display", ""));
}
}
}
showHideMaxFileSizeMsg();
}
// check whether event is fired from the half Day leave type dropdown
else if(dropdownElement.attr("id") == "select_unit_half_day_type_code") {
// Remove all div elements starting with 'file_upload_section_template_2'
$('div[id^="file_upload_section_template_2"]').remove();
var imageUploadOptionMap = {};
imageUploadOptionMap[10000009] = 2;
imageUploadOptionMap[10000001] = 2;
imageUploadOptionMap[20000003] = 2;
imageUploadOptionMap[10000002] = 2;
imageUploadOptionMap[20000002] = 2;
imageUploadOptionMap[10000003] = 2;
imageUploadOptionMap[20000005] = 2;
imageUploadOptionMap[10000004] = 2;
imageUploadOptionMap[20000004] = 2;
imageUploadOptionMap[10000005] = 2;
imageUploadOptionMap[20000007] = 2;
imageUploadOptionMap[10000006] = 2;
imageUploadOptionMap[20000006] = 2;
imageUploadOptionMap[10000007] = 2;
imageUploadOptionMap[20000009] = 2;
imageUploadOptionMap[10000008] = 2;
imageUploadOptionMap[20000008] = 2;
imageUploadOptionMap[20000010] = 2;
imageUploadOptionMap[20000001] = 2;
imageUploadOptionMap[10000010] = 2;
imageUploadOptionMap[10000011] = 2;
imageUploadOptionMap[20000011] = 2;
var selectedUnitHalfDayTypeCode = jQuery("#select_unit_half_day_type_code").val();
var imageUploadOption = imageUploadOptionMap[selectedUnitHalfDayTypeCode];
if(imageUploadOption ==0 || imageUploadOption ==1){
// draw new dev based on the selected half day type
var clonedTemplate = $("#file_upload_section_template").clone();
clonedTemplate.attr("id", "file_upload_section_template_2_"+selectedUnitHalfDayTypeCode);
clonedTemplate.find("#uploading_file").each(function() {
$(this).attr("id", "uploading_file_2");
$(this).attr("name", "uploading_file_2");
});
clonedTemplate.find("#compressed_image_string").each(function() {
$(this).attr("name", "compressed_image_string_uploading_file_2");
});
clonedTemplate.find("#display_name").each(function() {
$(this).attr("name", "display_name_uploading_file_2");
$(this).val($("#select_unit_half_day_type_code option:selected").text());
});
clonedTemplate.find("#regarding_work_type_code").each(function() {
$(this).attr("name", "regarding_work_type_code_uploading_file_2");
// selectedUnitHalfDayTypeCodeの下3桁が休暇コードになっているため
var start = selectedUnitHalfDayTypeCode.length - 3;
var end = selectedUnitHalfDayTypeCode.length;
var regardingWorkTypeCode = selectedUnitHalfDayTypeCode.substring(start, end);
$(this).val(regardingWorkTypeCode);
});
clonedTemplate.find("#leave_type_name").text($("#select_unit_half_day_type_code option:selected").text());
target.append(clonedTemplate.css("display", ""));
}
showHideMaxFileSizeMsg();
}
}
/**
* 20180612_A_09 - Medical certificate file upload for medical leave
* This method will populate file uploading fields dynamically based on selected hourly leave type
*/
function populateFileUploadFieldsForHourlyLeave(dropdownElement){
var target = $("#file_upload_section");
var dropdownElementId = dropdownElement.attr("id"); // Ex: regarding_work_type_code1
var index = dropdownElementId.slice(-1); // Ex: retun last character of the dropdownElementId string, ie. '1'
var templateIdToBeRemoved = "file_upload_section_template_3_" + index;
// remove existing image upload field (Remove all div elements starting with given Id)
$("div[id^="+templateIdToBeRemoved+"]").remove();
var imageUploadOptionMap = {};
imageUploadOptionMap[1] = 2;
imageUploadOptionMap[2] = 2;
imageUploadOptionMap[3] = 2;
imageUploadOptionMap[4] = 2;
imageUploadOptionMap[5] = 2;
imageUploadOptionMap[6] = 2;
imageUploadOptionMap[7] = 2;
imageUploadOptionMap[8] = 2;
imageUploadOptionMap[9] = 2;
imageUploadOptionMap[10] = 2;
imageUploadOptionMap[11] = 2;
var imageUploadOption = imageUploadOptionMap[$(dropdownElement).val()];
if(imageUploadOption ==0 || imageUploadOption ==1){
// draw new dev based on the regarding work type
var regardingWorkTypeCode = $(dropdownElement).val(); // Ex: return 13 for Medical Leave
var regardingWorkTypeName = $(dropdownElement).children("option").filter(":selected").text(); // Ex: Medical Leave
var clonedTemplate = $("#file_upload_section_template").clone();
clonedTemplate.attr("id", "file_upload_section_template_3_"+ index);
clonedTemplate.find("#uploading_file").each(function() {
$(this).attr("id", "uploading_file_3_" + index);
$(this).attr("name", "uploading_file_3_" + index);
});
clonedTemplate.find("#compressed_image_string").each(function() {
$(this).attr("name", "compressed_image_string_uploading_file_3_" + index);
});
clonedTemplate.find("#display_name").each(function() {
$(this).attr("name", "display_name_uploading_file_3_" + index);
$(this).val(regardingWorkTypeName);
});
clonedTemplate.find("#regarding_work_type_code").each(function() {
$(this).attr("name", "regarding_work_type_code_uploading_file_3_" + index);
$(this).val(regardingWorkTypeCode);
});
clonedTemplate.find("#leave_type_name").text(regardingWorkTypeName);
target.append(clonedTemplate.css("display", ""));
}
showHideMaxFileSizeMsg();
}
/**
* A_09 - Medical certificate file upload for medical leave
* This method will populate file uploading fields dynamically based on selected Vacation Category
*/
function populateFileUploadFieldsForVacationCategory(dropdownElement){
var target = $("#file_upload_section");
var uploadingFileVacationCategory = "uploading_file_vc_"; // `vc` => Vacation Category
var dropdownElementId = dropdownElement.attr("id"); // Ex: leave_type_code1
var index = dropdownElementId.slice(-1); // Ex: return last character of the dropdownElementId string, ie. '1'
var templateIdToBeRemoved = "file_upload_section_template_vc_" + index;
// remove existing image upload field (Remove all div elements starting with given Id)
$("div[id^="+templateIdToBeRemoved+"]").remove();
var imageUploadOptionMap = {};
imageUploadOptionMap[1] = 2;
imageUploadOptionMap[2] = 2;
imageUploadOptionMap[3] = 2;
imageUploadOptionMap[4] = 2;
imageUploadOptionMap[5] = 2;
imageUploadOptionMap[6] = 2;
imageUploadOptionMap[7] = 2;
imageUploadOptionMap[8] = 2;
imageUploadOptionMap[9] = 2;
imageUploadOptionMap[10] = 2;
imageUploadOptionMap[11] = 2;
var firstUndescoreIndex = $(dropdownElement).val().indexOf('_');
var imageUploadOption = imageUploadOptionMap[$(dropdownElement).val().slice(0, firstUndescoreIndex)];
// 0 => Mandatory; 1 => Optional; 2 => Not Required
if(imageUploadOption ==0 || imageUploadOption ==1){
// draw new dev based on the regarding work type
var dropdownElementValue = $(dropdownElement).val(); // Ex: return 13 for Medical Leave
var dropdownElementValueArray = dropdownElementValue.split("_");
var regardingWorkTypeCode = dropdownElementValueArray[0];
var regardingWorkTypeName = $(dropdownElement).children("option").filter(":selected").text(); // Ex: Medical Leave
var clonedTemplate = $("#file_upload_section_template").clone();
clonedTemplate.attr("id", "file_upload_section_template_vc_"+ index);
clonedTemplate.find("#uploading_file").each(function() {
$(this).attr("id", uploadingFileVacationCategory + index);
$(this).attr("name", uploadingFileVacationCategory + index);
});
clonedTemplate.find("#compressed_image_string").each(function() {
$(this).attr("name", "compressed_image_string_" + uploadingFileVacationCategory + index);
});
clonedTemplate.find("#display_name").each(function() {
$(this).attr("name", "display_name_" + uploadingFileVacationCategory + index);
$(this).val(regardingWorkTypeName);
});
clonedTemplate.find("#regarding_work_type_code").each(function() {
$(this).attr("name", "regarding_work_type_code_" + uploadingFileVacationCategory + index);
$(this).val(regardingWorkTypeCode);
});
clonedTemplate.find("#leave_type_name").text(regardingWorkTypeName);
target.append(clonedTemplate.css("display", ""));
}
showHideMaxFileSizeMsg();
}
/**
* create leave type details map to store regarding work type dto data
* [201806_A-10_Full day leave schedule without creating leave schedule pattern]
*/
function makeRegardingWorkTypeDetailsMap(){
var all_day_vacation_regarding_work_type_map = new Object();
var reagrding_work_type_setting = { regardingWorkTypeCode : 1,
regardingWorkTypeName : '有休',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 1,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[1] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 2,
regardingWorkTypeName : '代休',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[2] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 3,
regardingWorkTypeName : '欠勤',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[3] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 4,
regardingWorkTypeName : '子の看護休暇',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : -1,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[4] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 5,
regardingWorkTypeName : '介護休暇',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : -1,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[5] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 6,
regardingWorkTypeName : '産前産後休業',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[6] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 7,
regardingWorkTypeName : '育児休業',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[7] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 8,
regardingWorkTypeName : '介護休業',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[8] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 9,
regardingWorkTypeName : '労災休業',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[9] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 10,
regardingWorkTypeName : '公休',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 0,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[10] = reagrding_work_type_setting;
var reagrding_work_type_setting = { regardingWorkTypeCode : 11,
regardingWorkTypeName : '夏季休暇',
fullDayLeaveTypeCountFlag : 0,
useHalfLeaveFlag : 1,
timeUnitHolidayMaxCount : 0,
colorCodeStr : '000000',
colorCode : 'ffffff',
scheduleRequestForLeaveType : 0,
workDayTypeCode :  '' ,
forceResetScheduleOptions :  '' };
all_day_vacation_regarding_work_type_map[11] = reagrding_work_type_setting;
return all_day_vacation_regarding_work_type_map;
}
/**
* 20180612_A_09 - Medical certificate file upload for medical leave.
* This method will check whether there is at least image one upload field in the form.
* If there is, then show 'Max file size' message. Otherwise hide it.
* No need to display 'Max file size' message when there are no any image input fields in the form.
*/
function showHideMaxFileSizeMsg(){
if($('div[id^="file_upload_section_template_"]').length>0){
$("#image_upload_header").show();
$("#image_upload_input_section").show();
$("#image_upload_table_row").show();
$("#max_file_size_msg").show();
}else{
$("#image_upload_header").hide();
$("#image_upload_input_section").hide();
$("#image_upload_table_row").hide();
$("#max_file_size_msg").hide();
}
}
function isSchedulePatternReset(inputObjectName) {
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var pattarnObj = schedulePatternMap[schedulePatternId];
//半休が設定されている場合には半休スケジュールを適用
var useAllDayLeaveType =  true ;
if(useAllDayLeaveType) {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDayLeaveTypeSchedulePattern(pattarnObj, "" + jQuery("#leave_type_mode1").val());
} else {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDaySchedulePattern(pattarnObj, "" + jQuery("#select_unit_half_day_type_code").val());
}
if (pattarnObj) {
if (pattarnObj.scheduleTypeCode == 3) {
return true;
}
if(jQuery(inputObjectName).hasClass('schedule_start_time')) {
if (pattarnObj.startTimeHour) {
return true;
}
}
else if (jQuery(inputObjectName).hasClass('schedule_end_time')) {
if (pattarnObj.endTimeHour) {
return true;
}
}
else if (jQuery(inputObjectName).hasClass('early_work_start_time')) {
if (pattarnObj.earlyWorkStartTimeHour) {
return true;
}
}
else if (jQuery(inputObjectName).hasClass('late_work_end_time')) {
if (pattarnObj.lateWorkEndTimeHour) {
return true;
}
}
else if (jQuery(inputObjectName).hasClass('schedule_break_minute')) {
if (pattarnObj.breakMinute) {
return true;
}
}
else if (jQuery(inputObjectName).hasClass('break_times')) {
var breakTimeArray = (pattarnObj) ? pattarnObj.breakTimeArray : [];
var breakTimeLen = breakTimeArray.length;
if(breakTimeLen > 0){
return true;
}
}
return false;
}
return false;
}
function setSchedulePatternInfo(useAllDayLeaveType) {
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var pattarnObj = schedulePatternMap[schedulePatternId];
//半休が設定されている場合には半休スケジュールを適用
if(useAllDayLeaveType) {
// 半日*2は全日休暇を割り当てる
if(!isBothAMPMLeaveSelected()) {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDayLeaveTypeSchedulePattern(pattarnObj, "" + jQuery("#leave_type_mode1").val());
}
} else {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDaySchedulePattern(pattarnObj, "" + jQuery("#select_unit_half_day_type_code").val());
}
if(pattarnObj){
if (pattarnObj.startTimeHour) {
$("#schedule_start_time").val(pattarnObj.startTime);
$("#schedule_start_time_hour").val(pattarnObj.startTimeHour);
$("#schedule_start_time_minute").val(pattarnObj.startTimeMinute);
$("#day_border_time_day").val(pattarnObj.startTimeDayInterval);
}
if (pattarnObj.endTimeHour) {
$("#schedule_end_time").val(pattarnObj.endTime);
$("#schedule_end_time_hour").val(pattarnObj.endTimeHour);
$("#schedule_end_time_minute").val(pattarnObj.endTimeMinute);
$("#schedule_end_time_day").val(pattarnObj.endTimeDayInterval);
}
if (pattarnObj.earlyWorkStartTimeHour) {
$("#early_work_start_time").val(pattarnObj.earlyWorkStartTime);
$("#early_work_start_time_hour").val(pattarnObj.earlyWorkStartTimeHour);
$("#early_work_start_time_minute").val(pattarnObj.earlyWorkStartTimeMinute);
$("#early_work_start_time_day").val(pattarnObj.earlyWorkStartTimeDayInterval);
}
if (pattarnObj.lateWorkEndTimeHour) {
$("#late_work_end_time").val(pattarnObj.lateWorkEndTime);
$("#late_work_end_time_hour").val(pattarnObj.lateWorkEndTimeHour);
$("#late_work_end_time_minute").val(pattarnObj.lateWorkEndTimeMinute);
$("#late_work_end_time_day").val(pattarnObj.lateWorkEndTimeDayInterval);
}
if(pattarnObj.breakMinute) {
$("#schedule_break_minute").val(pattarnObj.breakMinute);
}
}
}
function setBreakHtml(useAllDayLeaveType) {
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var pattarnObj = schedulePatternMap[schedulePatternId];
//半休が設定されている場合には半休スケジュールを適用
if(useAllDayLeaveType) {
// 半日*2は全日休暇を割り当てる
if(!isBothAMPMLeaveSelected()) {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDayLeaveTypeSchedulePattern(pattarnObj, "" + jQuery("#leave_type_mode1").val());
}
} else {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDaySchedulePattern(pattarnObj, "" + jQuery("#select_unit_half_day_type_code").val());
}
var target = $("#break_html");
target.html(""); //初期化
var counter = 1;
var disabled = false;
var breakTimeArray = (pattarnObj) ? pattarnObj.breakTimeArray : [];
var breakTimeLen = breakTimeArray.length;
if(breakTimeLen > 0){
for (i = 0; i < breakTimeLen; i++) {
var breakTime = breakTimeArray[i];
(function(){
var cloned = $("#break_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
cloned.find("#break_start_time_day" + counter).each(function() {
$(this).val(breakTime.startTimeDayInterval);
if(disabled) {
$(this).prop("disabled", true);
}
});
cloned.find("#break_start_time_hour" + counter).each(function() {
$(this).val(breakTime.startTimeHour);
});
cloned.find("#break_start_time_minute" + counter).each(function() {
$(this).val(breakTime.startTimeMinute);
});
cloned.find("#break_start_time_" + counter).each(function() {
$(this).val(breakTime.startTime);
if(disabled) {
$(this).prop("disabled", true);
}
});
cloned.find("#break_end_time_day" + counter).each(function() {
$(this).val(breakTime.endTimeDayInterval);
if(disabled) {
$(this).prop("disabled", true);
}
});
cloned.find("#break_end_time_hour" + counter).each(function() {
$(this).val(breakTime.endTimeHour);
});
cloned.find("#break_end_time_minute" + counter).each(function() {
$(this).val(breakTime.endTimeMinute);
});
cloned.find("#break_end_time_" + counter).each(function() {
$(this).val(breakTime.endTime);
if(disabled) {
$(this).prop("disabled", true);
}
});
var hiddenCloned = null;
if(disabled) {
hiddenCloned = $("#break_hidden_add_template").clone().removeAttr("id");
var hiddenInnerHtml = hiddenCloned.html().replace(/{{count}}/g, counter);
hiddenCloned.html(hiddenInnerHtml);
hiddenCloned.find("#break_start_time_day_hidden" + counter).each(function() {
$(this).val(breakTime.startTimeDayInterval);
});
hiddenCloned.find("#break_start_time_hour_hidden" + counter).each(function() {
$(this).val(breakTime.startTimeHour);
});
hiddenCloned.find("#break_start_time_minute_hidden" + counter).each(function() {
$(this).val(breakTime.startTimeMinute);
});
hiddenCloned.find("#break_end_time_day_hidden" + counter).each(function() {
$(this).val(breakTime.endTimeDayInterval);
});
hiddenCloned.find("#break_end_time_hour_hidden" + counter).each(function() {
$(this).val(breakTime.endTimeHour);
});
hiddenCloned.find("#break_end_time_minute_hidden" + counter).each(function() {
$(this).val(breakTime.endTimeMinute);
});
}
target.append(cloned.css("display", ""));
if(hiddenCloned) {
target.append(hiddenCloned.css("display", ""));
}
})();
counter++;
}
}
if(!disabled) {
//ここで新規の行を追加
//新規の入力欄
var newCloned = $("#break_add_template").clone().removeAttr("id");
var newClonedInnterHtml = newCloned.html().replace(/{{count}}/g, counter);
newCloned.html(newClonedInnterHtml);
target.append(newCloned.css("display", ""));
}
$("#break_pattern_counter").val(counter);
}
function setInputValue(){
}
function setBreakBeginHtml() {
//エラー時の入力内容をセット
var counter = 1;
var disabled = false;
var formAddTarget = $("#break_html");
var orgHiddenAddTarget = $("#break_org_hidden");
if(!disabled) {
if($("#break_add_template").attr("id")) {
//新規の入力欄
var newCloned = $("#break_add_template").clone().removeAttr("id");
var newClonedInnterHtml = newCloned.html().replace(/{{count}}/g, counter);
newCloned.html(newClonedInnterHtml);
formAddTarget.append(newCloned.css("display", ""));
}
}
$("#break_pattern_counter").val(counter);
}
function addBreakHtml() {
var counter = $("#break_pattern_counter").val();
counter++;
var appendTarget = $("#break_html");
var cloned = $("#break_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
appendTarget.append(cloned.css("display", ""));
$("#break_pattern_counter").val(counter);
HtLib.timestamp.validateTimeStamp("#break_end_time_" + counter);
HtLib.timestamp.validateTimeStamp("#break_start_time_" + counter);
}
function deleteScheduleTime() {
$("#schedule_start_time").val("");
$("#schedule_start_time_hour").val("");
$("#schedule_start_time_minute").val("");
$("#day_border_time_day").val("0");
$("#schedule_end_time").val("");
$("#schedule_end_time_hour").val("");
$("#schedule_end_time_minute").val("");
$("#schedule_end_time_day").val("0");
$("#early_work_start_time").val("");
$("#early_work_start_time_hour").val("");
$("#early_work_start_time_minute").val("");
$("#early_work_start_time_day").val("0");
$("#late_work_end_time").val("");
$("#late_work_end_time_hour").val("");
$("#late_work_end_time_minute").val("");
$("#late_work_end_time_day").val("0");
jQuery("#schedule_break_minute").val("");
$("#early_work_start_time").prop("disabled", false);
$("#early_work_start_time_day").prop("disabled", false);
$("#late_work_end_time").prop("disabled", false);
$("#late_work_end_time_day").prop("disabled", false);
}
function setSchedulePatternCondition(useAllDayLeaveType) {
var schedulePatternId = jQuery("#select_schedule_pattern_id").val();
var pattarnObj = schedulePatternMap[schedulePatternId];
//半休が設定されている場合には半休スケジュールを適用
if(useAllDayLeaveType) {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDayLeaveTypeSchedulePattern(pattarnObj, "" + jQuery("#leave_type_mode1").val());
} else {
pattarnObj = KOT_GLOBAL.KOT_LIB.HalfDayType.getHalfDaySchedulePattern(pattarnObj, "" + jQuery("#select_unit_half_day_type_code").val());
}
if (pattarnObj) {
if(pattarnObj.scheduleTypeCode == 2 || pattarnObj.scheduleTypeCode == 8 || pattarnObj.scheduleTypeCode == 9) {
if (pattarnObj.scheduleTypeCode == 2) {
setSchedulePatternConditionCustom(pattarnObj);
$("#early_work_start_time").prop("disabled",true);
$("#early_work_start_time_day").prop("disabled",true);
$("#late_work_end_time").prop("disabled",true);
$("#late_work_end_time_day").prop("disabled",true);
}
else if (pattarnObj.scheduleTypeCode == 8) {
setSchedulePatternConditionCustom(pattarnObj);
$("#early_work_start_time").prop("disabled",true);
$("#early_work_start_time_day").prop("disabled",true);
}
else if (pattarnObj.scheduleTypeCode == 9) {
setSchedulePatternConditionCustom(pattarnObj);
$("#late_work_end_time").prop("disabled",true);
$("#late_work_end_time_day").prop("disabled",true);
}
}
else {
$("#early_work_start_time").prop("disabled",false);
$("#early_work_start_time_day").prop("disabled",false);
$("#late_work_end_time").prop("disabled",false);
$("#late_work_end_time_day").prop("disabled",false);
setSchedulePatternConditionCustom(pattarnObj);
}
}
}
function setSchedulePatternConditionCustom(pattarnObj) {
}
function loadUploadFileOnTimestamp(idOfRecordingType) {
var countSuffixOfType= idOfRecordingType.split("_").pop();
var uploadFileId = "file_upload_container_" + countSuffixOfType;
var selectedOptionValue = jQuery('#' + idOfRecordingType).val();
if(isNaN(selectedOptionValue)){
jQuery('#'+ uploadFileId).hide();
}else{
jQuery('#'+ uploadFileId).show();
}
}
function recordingTimestampAddinputHtml() {
var counter = $("#recording_timestamp_add_counter").val();
counter++;
if (counter >= 100) {
$("#recording_timestamp_add").prop("disabled", true);
}
var table = $("#recording_timestamp_table");
var cloned = $("#recording_timestamp_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
cloned.find(".recording_timestamp_date").each(function(){
//日のカレンダー表示を更新
HtLib.calendar.refreshDayCalendar(this);
});
table.append(cloned.css("display", ""));
$("#recording_timestamp_add_counter").val(counter);
HtLib.timestamp.validateTimeStamp("#recording_timestamp_time_" + counter);
jQuery('#file_upload_container_' + counter).hide();
}
function fileUploadAddHtml(countSuffixOfType) {
var counter = $("#file_upload_add_counter_" + countSuffixOfType).val();
counter++;
if (counter >= 10) {
$("#file_upload_add_" + countSuffixOfType).prop("disabled", true);
}
var div = $("#file_upload_template_add_" + countSuffixOfType);
var clonedTemplate = $("#file_upload_template_add_container").clone().removeAttr("id");
var innerHtml = clonedTemplate.html().replace(/{{count}}/g, countSuffixOfType + "_" + counter);
clonedTemplate.html(innerHtml);
div.append(clonedTemplate.css("display", ""));
$("#file_upload_add_counter_" + countSuffixOfType).val(counter);
}
function timeUnitHolidayAddinputHtml() {
var counter = $("#time_unit_holiday_counter").val();
counter++;
var target = $("#time_unit_holiday_table");
var cloned = $("#time_unit_holiday_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
target.append(cloned.css("display", ""));
$("#time_unit_holiday_counter").val(counter);
HtLib.timestamp.validateTimeStamp("#time_holiday_start_" + counter);
HtLib.timestamp.validateTimeStamp("#time_holiday_end_" + counter);
}
function addLeaveTypeinputHtml() {
var counter = $("#leave_type_counter").val();
var previousItemLeaveTypeModesArray = [];
for (i = 1; i <= counter; i++) {
previousItemLeaveTypeModesArray.push( $('#leave_type_mode' + (i)).val() );
}
counter++;
var target = $("#leave_type_table");
var cloned = $("#add_leave_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
target.append(cloned.css("display", ""));
if(counter > 2) {
$('#leave_type_code' + counter).empty();
var optionHtml = $("<option>").val("").text('--');
$('#leave_type_code' + counter).append(optionHtml);
for (var key in map_regarding_work_type_map) {
var regarding_work_type = map_regarding_work_type_map[key];
optionHtml = $("<option>").val(regarding_work_type.regardingWorkTypeCode + '_' + regarding_work_type.fullDayLeaveTypeCountFlag
+ '_' + regarding_work_type.useHalfLeaveFlag + '_' + regarding_work_type.timeUnitHolidayMaxCount)
.prop('selected', false).text(regarding_work_type.regardingWorkTypeName).css("color", "#" + regarding_work_type.colorCodeStr)
.css("background-color", "#" + regarding_work_type.colorCode);
if((previousItemLeaveTypeModesArray.indexOf('2') > -1 || previousItemLeaveTypeModesArray.indexOf('3') > -1)
&& regarding_work_type.timeUnitHolidayMaxCount != null && regarding_work_type.timeUnitHolidayMaxCount != 0) {
$('#leave_type_code' + counter).append(optionHtml);
} else if ((previousItemLeaveTypeModesArray.indexOf('2') == -1 && previousItemLeaveTypeModesArray.indexOf('3') == -1)
&& (regarding_work_type.useHalfLeaveFlag ==1 || (regarding_work_type.timeUnitHolidayMaxCount != null && regarding_work_type.timeUnitHolidayMaxCount != 0))) {
$('#leave_type_code' + counter).append(optionHtml);
}
}
}
$("#leave_type_counter").val(counter);
$("#add_leave_type_button").hide();
HtLib.timestamp.validateTimeStamp("#leave_type_start_" + counter);
HtLib.timestamp.validateTimeStamp("#leave_type_end_" + counter);
}
function enableAddLeaveButtonLeaveByHours(leaveMode, leaveTypeIndex) {
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '-1');
var counter = $("#leave_type_counter").val();
var previousItemLeaveTypeModesArray = [];
var currentPreviousItemLeaveTypeModesArray = [];
for (i = 1; i < leaveTypeIndex; i++) {
previousItemLeaveTypeModesArray.push( $('#leave_type_mode' + (i)).val() );
}
for (i = (parseInt(leaveTypeIndex) + 1); i <= counter; i++) {
currentPreviousItemLeaveTypeModesArray = [];
for (j = 2; j < i; j++) {
$("#leave_type_mode" + (j) + " option").each(function()
{
currentPreviousItemLeaveTypeModesArray.push($(this).val());
});
}
if($("#leave_type_code" + i).val() == "") {
if( leaveMode == "--" || parseInt(leaveMode) == 0 || leaveMode == 1 ) {
$("#add_leave_type" + i).parent().remove();
$("#leave_type_counter").val(parseInt(leaveTypeIndex));
continue;
}
} else if(leaveMode == "--") {
$("#add_leave_type" + i).parent().remove();
$("#leave_type_counter").val(parseInt(leaveTypeIndex));
$("div[id^=file_upload_section_template_vc_"+i+"]").remove();
continue;
}
var leaveTypeCodeArray = $("#leave_type_code" + i).val().split("_");
var useHalfLeaveFlag = leaveTypeCodeArray[2];
var timeUnitHolidayMaxCount = leaveTypeCodeArray[3];
if(leaveMode == "--") {
$('#leave_type_mode' + i).empty();
var optionHtml = $("<option>").text('--');
$('#leave_type_mode' + i).append(optionHtml);
} else if( parseInt(leaveMode) == 0 || leaveMode == 1 ) {
$("#add_leave_type" + i).parent().remove();
$("div[id^=file_upload_section_template_vc_"+i+"]").remove();
} else if((leaveMode == 2 && previousItemLeaveTypeModesArray.indexOf('3') > -1) || (leaveMode == 3 && previousItemLeaveTypeModesArray.indexOf('2') > -1)) {
$("#add_leave_type" + i).parent().remove();
$("div[id^=file_upload_section_template_vc_"+i+"]").remove();
} else if(leaveMode == 2) {
$('#leave_type_mode' + i).empty();
var optionHtml = $("<option>").text('--');
$('#leave_type_mode' + i).append(optionHtml);
if(currentPreviousItemLeaveTypeModesArray.indexOf('3') == -1 && useHalfLeaveFlag == 1) {
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#leave_type_mode' + i).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#leave_type_mode' + i).append(optionHtml);
}
} else if(leaveMode == 3) {
$('#leave_type_mode' + i).empty();
var optionHtml = $("<option>").text('--');
$('#leave_type_mode' + i).append(optionHtml);
if(currentPreviousItemLeaveTypeModesArray.indexOf('2') == -1 && useHalfLeaveFlag == 1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#leave_type_mode' + i).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#leave_type_mode' + i).append(optionHtml);
}
} else if(leaveMode == 4) {
$('#leave_type_mode' + i).empty();
var optionHtml = $("<option>").text('--');
$('#leave_type_mode' + i).append(optionHtml);
if(previousItemLeaveTypeModesArray.indexOf('2') == -1 && previousItemLeaveTypeModesArray.indexOf('3') == -1 && useHalfLeaveFlag == 1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#leave_type_mode' + i).append(optionHtml);
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#leave_type_mode' + i).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#leave_type_mode' + i).append(optionHtml);
}
}
$("#leave_by_hours_div" + i).hide();
$("#leave_by_hours_div2" + i).hide();
}
if (leaveMode == 2 || leaveMode == 3 || leaveMode == 4) {
if(leaveTypeIndex > 1) {
var previousItemLeaveTypeMode = $('#leave_type_mode' + (leaveTypeIndex - 1)).val();
if((leaveMode == 2 && previousItemLeaveTypeModesArray.indexOf('3') > -1) || (leaveMode == 3 && previousItemLeaveTypeModesArray.indexOf('2') > -1)){
$("#add_leave_type_button").hide();
$("#leave_type_counter").val(2);
if(leaveMode != "--" && leaveMode != "") {
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '3');
}
} else {
$("#add_leave_type_button").show();
}
} else if(counter < 2) {
$("#add_leave_type_button").show();
}
if( leaveMode == 4 ) {
$("#leave_by_hours_div" + leaveTypeIndex).show();
$("#leave_by_hours_div2" + leaveTypeIndex).show();
} else {
$("#leave_by_hours_div" + leaveTypeIndex).hide();
$("#leave_by_hours_div2" + leaveTypeIndex).hide();
}
} else {
if( parseInt(leaveMode) == 0 || leaveMode == 1 ) {
$("#leave_type_counter").val(1);
}
$("#add_leave_type_button").hide();
$("#leave_by_hours_div" + leaveTypeIndex).hide();
$("#leave_by_hours_div2" + leaveTypeIndex).hide();
if(leaveMode != "--" && leaveMode != "") {
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '3');
}
}
//Set half day schedule data
settingScheduleTimes(true, false);
settingOptions();
}
function listLeaveModeOptions(leaveTypeCode, elementId, itemCount, contractFlag) {
updateSupplementalWorkingRecordSettingMasterData('supplemental_working_record_setting', false, '-1');
// medical certificate upload input fields should be populated only for employee login.
// 17 => Employee normal (従業員 通常), 18 => Employee Embossable editable (従業員 打刻編集)
populateFileUploadFieldsForVacationCategory($('#leave_type_code' + itemCount));
$('#' + elementId).empty();//remove all existing options
var optionHtml = $("<option>").text('--');
$('#' + elementId).append(optionHtml);
chBackGround(document.getElementById("leave_type_code"+itemCount));
chStrColor(document.getElementById("leave_type_code"+itemCount));
if(leaveTypeCode.length == 0) { //no valid option selected, return.
$("#add_leave_type_button").hide();
var totalItemCount = $("#leave_type_counter").val();
for (i = itemCount < 2 ? 2 : itemCount; i <= totalItemCount; i++) {
$("#add_leave_type" + i).parent().remove();
$("div[id^=file_upload_section_template_vc_"+i+"]").remove();
showHideMaxFileSizeMsg();
$("#leave_type_counter").val($("#leave_type_counter").val() - 1);
}
if(itemCount <= totalItemCount && itemCount != 1) {
$("#add_leave_type_button").show();
}
$("#leave_by_hours_div" + itemCount).hide();
$("#leave_by_hours_div2" + itemCount).hide();
//Set half day schedule data
settingScheduleTimes(true, false);
settingOptions();
return;
}
var leaveTypeCodeArray = leaveTypeCode.split("_");
var fullDayLeaveTypeCountFlag = leaveTypeCodeArray[1];
var useHalfLeaveFlagFlag = leaveTypeCodeArray[2];
var timeUnitHolidayMaxCount = leaveTypeCodeArray[3];
if(itemCount > 1) {
var previousItemLeaveTypeMode = $('#leave_type_mode' + (itemCount - 1)).val();
var previousItemLeaveTypeModesArray = [];
for (i = 1; i < itemCount; i++) {
previousItemLeaveTypeModesArray.push( $('#leave_type_mode' + (i)).val() );
}
if(previousItemLeaveTypeMode == "--") {
$("#leave_by_hours_div" + itemCount).hide();
$("#leave_by_hours_div2" + itemCount).hide();
return;
}
if(previousItemLeaveTypeMode == 2)  {
if(previousItemLeaveTypeModesArray.indexOf('4') > -1 && timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
} else {
if(useHalfLeaveFlagFlag == 1 && previousItemLeaveTypeModesArray.indexOf('4') == -1) {
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#' + elementId).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
}
}
} else if(previousItemLeaveTypeMode == 3) {
if(previousItemLeaveTypeModesArray.indexOf('4') > -1 && timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
} else {
if(useHalfLeaveFlagFlag == 1 && previousItemLeaveTypeModesArray.indexOf('4') == -1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#' + elementId).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
}
}
} else if(previousItemLeaveTypeMode == 4) {
if(previousItemLeaveTypeModesArray.indexOf('2') == -1 && previousItemLeaveTypeModesArray.indexOf('3') == -1 && useHalfLeaveFlagFlag == 1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#' + elementId).append(optionHtml);
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#' + elementId).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
}
} else {
optionHtml = $("<option>").val(0).prop('selected', false).text('All-day vacation');
$('#' + elementId).append(optionHtml);
if(fullDayLeaveTypeCountFlag == 1 && 2 ==1) {
optionHtml = $("<option>").val(1).prop('selected', false).text('All-day vacation(Half day)');
$('#' + elementId).append(optionHtml);
}
if(useHalfLeaveFlagFlag == 1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#' + elementId).append(optionHtml);
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#' + elementId).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
}
}
} else {
optionHtml = $("<option>").val(0).prop('selected', false).text('All-day vacation');
$('#' + elementId).append(optionHtml);
if(fullDayLeaveTypeCountFlag == 1 && 2 ==1) {
optionHtml = $("<option>").val(1).prop('selected', false).text('All-day vacation(Half day)');
$('#' + elementId).append(optionHtml);
}
if(useHalfLeaveFlagFlag == 1) {
optionHtml = $("<option>").val(2).prop('selected', false).text('AMHalf-day vacation');
$('#' + elementId).append(optionHtml);
optionHtml = $("<option>").val(3).prop('selected', false).text('PMHalf-day vacation');
$('#' + elementId).append(optionHtml);
}
if(timeUnitHolidayMaxCount != null && timeUnitHolidayMaxCount != 0 && contractFlag != 1) {
optionHtml = $("<option>").val(4).prop('selected', false).text('Vacation by hours');
$('#' + elementId).append(optionHtml);
}
}
$("#leave_by_hours_div" + itemCount).hide();
$("#leave_by_hours_div2" + itemCount).hide();
//Set half day schedule data
settingScheduleTimes(true, false);
settingOptions();
checkSelectableHalfDaySchedule();}
function gooutScheduleAddinputHtml() {
var counter = $("#goout_schedule_counter").val();
counter++;
var target =  $("#goout_schedule_table");
var cloned = $("#goout_schedule_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
target.append(cloned.css("display", ""));
$("#goout_schedule_counter").val(counter);
}
function overtimeSpanUnitAddinputHtml() {
var counter = $("#overtime_span_unit_counter").val();
counter++;
var target = $("#overtime_span_unit_add_area");
var cloned = $("#overtime_span_unit_add_template").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count}}/g, counter);
cloned.html(innerHtml);
target.append(cloned.css("display", ""));
$("#overtime_span_unit_counter").val(counter);
}
//additional daily record scripts
function addingSupplementalWorkingRecordHtml( )
{
var counter = $("#supplemental_working_record_counter").val();
counter++;
var table = $("#supplemental_working_record_table");
var cloned = $("#supplemental_working_record_row").clone().removeAttr("id");
var innerHtml = cloned.html().replace(/{{count_supplemental_working_record}}/g, counter);
cloned.html(innerHtml);
table.append(cloned.css("display", ""));
$("#supplemental_working_record_counter").val(counter);
var selected_element_id = 'supplemental_working_record_setting_' + counter;
updateSupplementalWorkingRecordSettingMasterData(selected_element_id, true, '-1');
HtLib.timestamp.validateTimeStamp("#start_time_" + counter);
HtLib.timestamp.validateTimeStamp("#end_time_" + counter);
KOT_GLOBAL.KOT_LIB.NumericValue.validateNumericValue("numeric_type_value_" + counter);
jQuery('select[id^="supplemental_working_record_setting_'+counter+'"]').each(function(){
loadUiElementsAccordingToSWRSettingType('supplemental_working_record_setting_'+counter);
jQuery(this).change(function(){
var nameOfSelectElement = jQuery(this).attr("name");
loadUiElementsAccordingToSWRSettingType(nameOfSelectElement);
});
});
}
$(document).on('blur', '.start_time_supplemental_working_record_timestamp', function()
{
if($(this).closest("tr").css("display") == "none") {
return;
}
var time = $(this).val();
var convert = KOT_GLOBAL.KOT_LIB.TimeValue.timeToHourMinute(time);
var suffix = $(this).attr("id").split("_").pop();
$("#start_time_supplemental_working_record_hour_" + suffix).val(convert.hour);
$("#start_time_supplemental_working_record_minute_" + suffix).val(convert.minute);
});
$(document).on('blur', '.end_time_supplemental_working_record_timestamp', function()
{
if($(this).closest("tr").css("display") == "none") {
return;
}
var time = $(this).val();
var convert = KOT_GLOBAL.KOT_LIB.TimeValue.timeToHourMinute(time);
var suffix = $(this).attr("id").split("_").pop();
$("#end_time_supplemental_working_record_hour_" + suffix).val(convert.hour);
$("#end_time_supplemental_working_record_minute_" + suffix).val(convert.minute);
});
// スケジュール申請の分割機能による勤務刻限の非活性制御
function setWorkTimeByScheduleRequestDivision() {
$("#early_work_start_time").prop("disabled", true);
$("#early_work_start_time_day").prop("disabled", true);
$("#late_work_end_time").prop("disabled", true);
$("#late_work_end_time_day").prop("disabled", true);
}
</script>
<meta http-equiv="origin-trial" content="AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="AymqwRC7u88Y4JPvfIF2F37QKylC04248hLCdJAsh8xgOfe/dVJPV3XS3wLFca1ZMVOtnBfVjaCMTVudWM//5g4AAAB7eyJvcmlnaW4iOiJodHRwczovL3d3dy5nb29nbGV0YWdtYW5hZ2VyLmNvbTo0NDMiLCJmZWF0dXJlIjoiUHJpdmFjeVNhbmRib3hBZHNBUElzIiwiZXhwaXJ5IjoxNjk1MTY3OTk5LCJpc1RoaXJkUGFydHkiOnRydWV9"><style type="text/css">#tudienjp * :not(svg,path){all:revert}#tudienjp svg{width:auto!important}#tudienjp{font-size:18px!important;font-family:Arial,ヒラギノ角ゴ Pro W3,Hiragino Kaku Gothic Pro,Osaka,メイリオ,Meiryo,ＭＳ Ｐゴシック,MS PGothic,sans-serif!important;color:#000!important;line-height:1.5!important;text-align:left!important}#tudienjp .o-result-item{line-height:1.5;display:block;margin-right:0;cursor:pointer}#tudienjp .o-result-item:hover{border-color:#c6d6ef!important}#tudienjp .o-selected-result{max-height:300px;overflow-y:scroll}#tudienjp .o-selected-result::-webkit-scrollbar{width:13px}#tudienjp .o-selected-result::-webkit-scrollbar-thumb{border-radius:10px;-webkit-box-shadow:inset 3px 0 0 3px #fff;background:rgba(0,0,0,.2)}#tudienjp .o-pop-nav div{font-size:14px;padding:3.2px 8px}#tudienjp .o-pop-speak{margin-top:5px;margin-right:8px;font-size:16px;cursor:pointer}#tudienjp .o-search-mobile{z-index:99998;position:absolute;display:none}#tudienjp .o-popup-tag{z-index:99999;position:absolute;display:none;padding:10px 5px 10px 10px}#tudienjp .o-bg-white{background-color:#fff!important}#tudienjp .o-border{border:1px solid #dee2e6!important}#tudienjp .o-rounded{border-radius:4px!important}#tudienjp .o-shadow{box-shadow:0 8px 16px rgba(0,0,0,.15)!important}#tudienjp .o-btn-close{box-sizing:content-box;width:16px;height:16px;padding:4px 4px;color:#000;background:transparent url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Cpath d='M.293.293a1 1 0 011.414 0L8 6.586 14.293.293a1 1 0 111.414 1.414L9.414 8l6.293 6.293a1 1 0 01-1.414 1.414L8 9.414l-6.293 6.293a1 1 0 01-1.414-1.414L6.586 8 .293 1.707a1 1 0 010-1.414z'/%3E%3C/svg%3E") 50%/16px auto no-repeat;border:0;border-radius:4px;opacity:.5;cursor:pointer}#tudienjp .o-btn-close:hover{opacity:.75}#tudienjp .o-me-1{margin-right:4px!important}#tudienjp .o-end-0{right:0!important}#tudienjp .o-top-0{top:0!important}#tudienjp .o-position-absolute{position:absolute!important}#tudienjp ul{padding-left:32px;display:block;list-style-type:disc;-webkit-margin-before:16px;margin-block-start:16px;-webkit-margin-after:16px;margin-block-end:16px;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:0;margin-inline-end:0;-webkit-padding-start:40px;padding-inline-start:40px}#tudienjp .o-pt-1{padding-top:4px!important}#tudienjp .mark,#tudienjp mark{padding:0!important;background-color:#ffffe0!important}#tudienjp .o-mt-1{margin-top:4px!important}#tudienjp .o-p-2{padding:8px!important}#tudienjp .o-mb-1{margin-bottom:4px!important}#tudienjp .o-border-3{border-width:3px!important}#tudienjp .o-text-secondary{color:#6c757d!important}#tudienjp .o-text-primary{cursor:pointer;color:#0d6efd}#tudienjp .o-text-primary:hover{text-decoration:underline}#tudienjp .o-w-100{width:100%!important}#tudienjp .o-link-danger{color:#dc3545}#tudienjp .o-link-danger:hover{color:#0d6efd}#tudienjp .o-link-ah:hover{color:#dc3545}#tudienjp .o-text-decoration-none{text-decoration:none!important}#tudienjp .o-fs-6,#tudienjp .o-small{font-size:16px!important}#tudienjp .o-ms-1{margin-left:4px!important}#tudienjp .o-mt-2{margin-top:8px!important}#tudienjp .o-float-start{float:left!important}#tudienjp label{display:inline-block}#tudienjp .o-float-end{float:right!important}#tudienjp .o-link-secondary{color:#6c757d!important}#tudienjp .o-result-item .o-inflect{font-size:14px;color:#666;overflow:hidden;text-overflow:ellipsis}#tudienjp .o-nav-tabs{border-bottom:1px solid #dee2e6}#tudienjp .o-nav{display:flex;flex-wrap:wrap;padding-left:0;margin-bottom:0;list-style:none}#tudienjp ul{margin-top:0;margin-bottom:16px}#tudienjp li{display:list-item;text-align:-webkit-match-parent}#tudienjp .o-nav-tabs .o-nav-item.show .o-nav-link,#tudienjp .o-nav-tabs .o-nav-link.active{color:#495057;background-color:#fff;border-color:#dee2e6 #dee2e6 #fff}#tudienjp .o-nav-link{display:block;padding:8px 16px;color:#0d6efd;text-decoration:none;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out;cursor:pointer}#tudienjp .o-nav-tabs .o-nav-link{margin-bottom:-1px;background:0 0;border:1px solid transparent;border-top-left-radius:4px;border-top-right-radius:4px;line-height:1.5}#tudienjp svg:not(:host).o-svg-inline--fa,#tudienjp svg:not(:root).o-svg-inline--fa{overflow:visible;box-sizing:content-box}#tudienjp .o-svg-inline--fa{display:inline-block;height:16px;overflow:visible;vertical-align:-2px}#tudienjp .o-form-check{font-size:16px;font-weight:400;line-height:1.5;color:#212529;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent;box-sizing:border-box;display:block;min-height:1.5rem;padding-left:1.5em;margin-bottom:0}#tudienjp .o-form-check-input{box-sizing:border-box;margin:0;font-family:inherit;font-size:inherit;line-height:inherit;width:1em;height:1em;margin-top:.25em;vertical-align:top;background-color:#fff;background-repeat:no-repeat;background-position:50%;background-size:contain;border:1px solid rgba(0,0,0,.25);-webkit-appearance:none;-moz-appearance:none;appearance:none;-webkit-print-color-adjust:exact;float:left;margin-left:-1.5em;border-radius:.25em}#tudienjp .o-form-check-input:before{content:""}#tudienjp .o-form-check-input:checked[type=checkbox]{background-color:#0d6efd;border-color:#0d6efd;background-image:url("data:image/svg+xml;charset=utf-8,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 20 20'%3E%3Cpath fill='none' stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='3' d='M6 10l3 3 6-6'/%3E%3C/svg%3E")}#tudienjp del{color:#6c757d!important}</style><style id="mttstyle">
    #mttContainer {
      left: 0 !important;
      top: 0 !important;
      position: fixed !important;
      z-index: 100000200 !important;
      width: 1000px !important;
      margin-left: -500px !important;
      background-color: #00000000  !important;
      pointer-events: none !important;
    }
    .bootstrapiso .tooltip {
      width:auto  !important;
      height:auto  !important;
      background:transparent  !important;
      border:none !important;
      border-radius: 0px !important;
      visibility: visible  !important;
      pointer-events: none !important;
    }
    .bootstrapiso .tooltip-inner {
      font-size: 14px  !important;
      max-width: 200px  !important;
      text-align: center !important;
      backdrop-filter: blur(15px)  !important; 
      background-color: #e6f9ff !important;
      color: #000 !important;
      border-radius: .25rem !important;
      pointer-events: none !important;
    }
    .bootstrapiso .arrow::before {
      border-top-color: #b3ecff !important;
      border-bottom-color: #b3ecff !important;
    }
    </style></head>
<body onkeypress="sendSubmit(event);">
<div class="htBlock-body specific-working_edit specific-pattern_c">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WDS55BP"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<div class="htBlock-header" id="header_main_menu">
<div class="htBlock-header_inner">
<div class="htBlock-header_backButton  htBlock-header_backButton_en " id="header_menu_back_button">
<p>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ#">
<span>Return</span>
</a>
</p>
</div>
<div class="htBlock-header_menuButton htBlock-header_menuButtonImg-for-employee menu-main">
<p>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ#">
<img src="./KING OF TIME Attendance Management3_files/header_Hamburger.png">
Menu
</a>
</p>
</div>
<div class="htBlock-header_spacer">
</div>
<div class="htBlock-header_userInfo">
<div class="htBlock-header_userInfo_inner">
<span>
<!--<img class="htBlock-header_userInfo_thumb" src="/asset/design1/img/templates/header_user.png">-->
<p class="htBlock-header_userInfo_name">
&nbsp;103 le mai
</p>
<p class="htBlock-header_userInfo_company">&nbsp;fzzhhp&nbsp;ＮｅｏＸ　ＡＳＩＡ株式会社</p>
</span>
</div>
</div>
<div class="htBlock-header_logoutButton" onclick="location.href=&#39;/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ?page_id=/login/do_logout&#39;">
<p>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ#">
<img src="./KING OF TIME Attendance Management3_files/header_icon_logout.png">
Sign out
</a>
</p>
</div>
</div><!-- end class="htBlock-header_inner" -->
<div class="htBlock-header_menuBody" style="display:none;">
<div class="htBlock-header_menuBody_title">
<h2>Menu
</h2>
<div class="htBlock-header_menuBody_closeButton"></div></div>
<table class="htBlock-header_menuBody_inner">
<tbody><tr>
<td>
<h3>Work data</h3>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ?page_id=/working/monthly_individual_working_list&amp;Ycnfmjlm=59FzvA5qezsscVQA">Time Card</a>
</td>
<td>
<h3>Others</h3>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ?page_id=/employee/request_list&amp;employee_id=902299435&amp;Ycnfmjlm=59FzvA5qezsscVQA">Request log (60 days)</a>
<a href="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ?page_id=/employee/change_password">Change password</a>
<a href="https://s2.ta.kingoftime.jp/independent/recorder2/personal" target="_blank">My Recorder</a>
</td>
</tr>
</tbody></table>
</div>
<script type="text/javascript">
(function($){
$(document).ready(function(){
$("#header_menu_back_button").on("click", function() {
var buttonType = "button";
if(buttonType === "link") {
location.href = "03";
}
else {
var backButtonSelector = "#03";
if(buttonType === "button") {
backButtonSelector = "#button_03";
}
$(backButtonSelector).click();
}
});
});
})(jQuery);
</script>
</div><!-- end htBlock-header -->
<h1 class="htBlock-pageTitle">
<img src="./KING OF TIME Attendance Management3_files/top_menubtn-s_workingedit_13.png">
<span>
Edit work data
</span>
<span>
</span>
</h1>
<!-- 従業員名表示部分 ---start---- -->
<h2 class="specific-titleLink">
営業部 / 
正社員 / 
103&nbsp;le mai
</h2>
<!-- 従業員名表示部分 ---end------ -->
<div class="htBlock-mainContents  specific-working_edit">
<h2>2023/12/06<span class="htBlock-subHeading">(Wed)</span>
</h2>
<div class="htBlock-box specific-box">
<form action="https://s2.ta.kingoftime.jp/admin/tee5bxXubjEDSivtL8WV5qUDz22PgWhQ" method="post" name="myForm" onsubmit="return submitFunction();" onkeypress="if(event.keyCode == 13){return false;}" id="working_edit_form" enctype="multipart/form-data">
<div class="htBlock-fixedToolbar specific-toolbar htBlock-fixedToolbar--fixed" style="width: 1261px;">
<div>
<input name="Ycnfmjlm" type="hidden" value="59FzvA5qezsscVQA">
<input name="action_id" type="submit" value="1" id="action_01" style="display: none;">
<button id="button_01" type="button" class=" htBlock-buttonSave   htBlock-buttonM " onclick="KOT_GLOBAL.KOT_LIB.onClickActionButton(&#39;action_01&#39;);">
<span>Schedule request</span>
</button>
</div>
<div></div>
</div><div class="htBlock-fixedToolbar_spacer" style="height: 48px; display: block;"></div>
<div class="htBlock-normalTable">
<h4 class="htBlock-box_subTitle">Time record</h4>
<table class="specific-table_600">
<thead>
<tr>
<th>Time-record type</th>
<th>Time-record method</th>
<th>Time-record time</th>
<th>Time record division</th>
</tr>
</thead>
<tbody>
<tr>
<td>--</td>
<td>--</td>
<td>--</td>
<td>--</td>
</tr>
</tbody>
</table>
</div><!-- end htBlock-normalTable -->
<div>
<div class="htBlock-normalTable"></div>
</div>
<div class="htBlock-expandTable specific-mainTable">
<h4 class="htBlock-box_subTitle">Edit schedule</h4>
<div id="file_upload_section_template" style="display:none;">
<div class="htBlock-variableForm_target">
<label name="leave_type_name" id="leave_type_name"></label>
<input type="file" name="uploading_file" id="uploading_file" accept=".pdf, image/*">
<input type="hidden" name="compressed_image_string" id="compressed_image_string" value="">
<input type="hidden" name="display_name" id="display_name" value="">
<input type="hidden" name="regarding_work_type_code" id="regarding_work_type_code" value="">
</div>
</div><table>
<tbody>
<!-- パターン -----------------------------------start------------>
<tr class="htBlock-expandTable_expanderHeader" data-ht-opt="rows:14 button-open">
<td colspan="2">
<h3><span class="htBlock-expandTable_icon htBlock-expandTable_icon--open"></span>Edit Regular schedule</h3>
</td>
</tr>
<tr>
<th title="Select pattern created at Pattern settings.">Pattern</th>
<td nowrap="" id="select_schedule_pattern_td" style="background-color: rgb(245, 245, 245);">
<div class="htBlock-table_alignmentBox">
<select name="schedule_pattern_id" id="select_schedule_pattern_id" class="flexselect schedule_pattern  view_bgcolor  htBlock-selectmenu htBlock-selectmenu-fix-width" style="">
<option class="s_0" value="" style="">--</option>
<option style="color:#000000;background-color:#ffffff;" class="s_1" value="90000058676968">通常勤務</option>
</select>
</div>
<input type="hidden" name="old_schedule_pattern_id" id="old_schedule_pattern_id" value="$currentSchedulePattern.getDTO().getSchedulePatternId()">
</td>
</tr>
<!-- パターン -----------------------------------end-------------->
<!-- 出退勤予定 -----------------------------------start------------>
<tr>
<th title="Enter when specifying time for clock-in/out schedule.">Clock in/out schedule</th>
<td>
<div class="htBlock-table_alignmentBoxLarge schedule_start_time">
<label>Clock in:</label>
<select name="schedule_start_time_day" id="day_border_time_day" class="htBlock-selectmenu">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="schedule_start_time_hour" id="schedule_start_time_hour" type="hidden" value="">
<input name="schedule_start_time_minute" id="schedule_start_time_minute" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" placeholder="hhmm" id="schedule_start_time" name="schedule_start_time" value="">
</div>
<div class="htBlock-table_alignmentBoxLarge schedule_end_time">
<label>Clock-out:</label>
<select name="schedule_end_time_day" id="schedule_end_time_day" class="htBlock-selectmenu">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="schedule_end_time_hour" id="schedule_end_time_hour" type="hidden" value="">
<input name="schedule_end_time_minute" id="schedule_end_time_minute" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" placeholder="hhmm" id="schedule_end_time" name="schedule_end_time" value="">
</div>
</td>
</tr>
<!-- 出退勤予定 -----------------------------------end-------------->
<!-- 勤務刻限 -----------------------------------start------------>
<tr>
<th>Work time</th>
<td>
<div class="htBlock-table_alignmentBoxLarge early_work_start_time">
<label>Start time:</label>
<select name="early_work_start_time_day" id="early_work_start_time_day" class="htBlock-selectmenu" disabled="">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input type="hidden" name="early_work_start_time_day_hidden" id="early_work_start_time_day_hidden" value="">
<input name="early_work_start_time_hour" id="early_work_start_time_hour" type="hidden" value="">
<input name="early_work_start_time_minute" id="early_work_start_time_minute" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" placeholder="hhmm" id="early_work_start_time" name="early_work_start_time" value="" disabled="">
</div>
<div class="htBlock-table_alignmentBoxLarge late_work_end_time">
<label>End time:</label>
<select name="late_work_end_time_day" id="late_work_end_time_day" class="htBlock-selectmenu" disabled="">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input type="hidden" name="late_work_end_time_day_hidden" id="late_work_end_time_day_hidden" value="">
<input name="late_work_end_time_hour" id="late_work_end_time_hour" type="hidden" value="">
<input name="late_work_end_time_minute" id="late_work_end_time_minute" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" placeholder="hhmm" id="late_work_end_time" name="late_work_end_time" value="" disabled="">
</div>
</td>
</tr>
<!-- 勤務刻限 -----------------------------------end-------------->
<!-- 早出残業開始/終了 -----------------------------------start------------>
<!-- 早出残業開始/終了 -----------------------------------end-------------->
<!-- 休憩予定 -----------------------------------start------------>
<tr>
<th>Break schedule</th>
<td class="htBlock-variableForm">
<div id="break_html" class="break_times"><div style="">
<div class="htBlock-variableForm_target">
<div class="htBlock-table_alignmentBoxLarge">
<label>Start break:</label>
<select class="htBlock-selectmenu" name="break_start_time_day1" id="break_start_time_day1">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="break_start_time_hour1" id="break_start_time_hour1" type="hidden" value="">
<input name="break_start_time_minute1" id="break_start_time_minute1" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" id="break_start_time_1" placeholder="hhmm" name="break_start_time1" value="">
</div>
<div class="htBlock-table_alignmentBoxLarge">
<label>End break:</label>
<select class="htBlock-selectmenu" name="break_end_time_day1" id="break_end_time_day1">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="break_end_time_hour1" id="break_end_time_hour1" type="hidden" value="">
<input name="break_end_time_minute1" id="break_end_time_minute1" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" id="break_end_time_1" placeholder="hhmm" name="break_end_time1" value="">
</div>
</div>
</div></div>
<div id="break_org_hidden"></div>

<div id="break_add_template" style="display:none;">
<div class="htBlock-variableForm_target">
<div class="htBlock-table_alignmentBoxLarge">
<label>Start break:</label>
<select class="htBlock-selectmenu" name="break_start_time_day{{count}}" id="break_start_time_day{{count}}">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="break_start_time_hour{{count}}" id="break_start_time_hour{{count}}" type="hidden" value="">
<input name="break_start_time_minute{{count}}" id="break_start_time_minute{{count}}" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" id="break_start_time_{{count}}" placeholder="hhmm" name="break_start_time{{count}}" value="">
</div>
<div class="htBlock-table_alignmentBoxLarge">
<label>End break:</label>
<select class="htBlock-selectmenu" name="break_end_time_day{{count}}" id="break_end_time_day{{count}}">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="break_end_time_hour{{count}}" id="break_end_time_hour{{count}}" type="hidden" value="">
<input name="break_end_time_minute{{count}}" id="break_end_time_minute{{count}}" type="hidden" value="">
<input type="text" class="htBlock-time schedule_time_value" id="break_end_time_{{count}}" placeholder="hhmm" name="break_end_time{{count}}" value="">
</div>
</div>
</div>


<div id="break_hidden_add_template" style="display:none;">
<input name="break_start_time_day{{count}}" id="break_start_time_day_hidden{{count}}" type="hidden" value="0">
<input name="break_start_time_hour{{count}}" id="break_start_time_hour_hidden{{count}}" type="hidden" value="">
<input name="break_start_time_minute{{count}}" id="break_start_time_minute_hidden{{count}}" type="hidden" value="">
<input name="break_end_time_day{{count}}" id="break_end_time_day_hidden{{count}}" type="hidden" value="0">
<input name="break_end_time_hour{{count}}" id="break_end_time_hour_hidden{{count}}" type="hidden" value="">
<input name="break_end_time_minute{{count}}" id="break_end_time_minute_hidden{{count}}" type="hidden" value="">
</div>


<div id="break_org_hidden_add_template" style="display:none;">
<input name="org_break_start_time_day{{count}}" id="org_break_start_time_day{{count}}" type="hidden" value="">
<input name="org_break_start_time_hour{{count}}" id="org_break_start_time_hour{{count}}" type="hidden" value="">
<input name="org_break_start_time_minute{{count}}" id="org_break_start_time_minute{{count}}" type="hidden" value="">
<input name="org_break_end_time_day{{count}}" id="org_break_end_time_day{{count}}" type="hidden" value="">
<input name="org_break_end_time_hour{{count}}" id="org_break_end_time_hour{{count}}" type="hidden" value="">
<input name="org_break_end_time_minute{{count}}" id="org_break_end_time_minute{{count}}" type="hidden" value="">
</div>

<div id="break_add_area">
<button type="button" id="break_schedule_add" class="htBlock-buttonS htBlock-buttonPrimary" onclick="addBreakHtml();">Add break schedule</button>
</div>
<input type="hidden" name="break_pattern_counter" id="break_pattern_counter" value="1">
</td>
</tr>
<!-- 休憩予定-----------------------------------end-------------->
<!-- 休憩予定時間 -----------------------------------start------------>
<tr>
<th title="Enter break schedule in minutes">Break schedule time</th>
<td>
<div class="htBlock-table_alignmentBoxLarge schedule_break_minute">
<label>Planned time:</label>
<input name="schedule_break_minute" id="schedule_break_minute" type="text" class="htBlock-text" value="" size="3" maxlength="3" style="ime-mode: disabled;">
<label>Min.</label>
</div>
</td>
</tr>
<!-- 休憩予定時間 -----------------------------------end------------>
<!-- 勤務日種別 -----------------------------------start------------>
<tr class="htBlock-table_separator2">
<th title="Select status to distinguish Working day attendance from Holiday attendance.">Workday type</th>
<td>
<div class="htBlock-table_alignmentBox">
<select name="work_day_type_code" id="select_work_day_type_code" class="htBlock-selectmenuBlock">




<option value="">--</option><option value="1">Weekday</option><option value="2">Legal time-off</option><option value="3">Non-legal time-off</option></select>
</div>
<input name="work_day_type_code" type="hidden" id="work_day_type_code" value="">
</td>
</tr>
<!-- 勤務日種別 -----------------------------------end-------------->
<!-- 時間帯区分 -----------------------------------start------------>
<!-- 時間帯区分 -----------------------------------end-------------->
<!-- 半休欠勤種別 -----------------------------------start------------>
<!-- 半休欠勤種別 -----------------------------------end-------------->
<!-- 時間休暇 -----------------------------------start------------>
      <!-- end of if(use_vacation_obtain_method || use_vacation_obtain_method == 0) -->
<!--201806_A-10_Full day leave schedule without creating  leave schedule pattern-->
<tr>
<th>Vacation category</th>
<td class="htBlock-variableForm">
<div id="leave_type_table">
<div class="htBlock-variableForm_target" id="added_leave_type_row1">
<div class="htBlock-table_alignmentBox">
<label>Type:</label>
<select class="htBlock-selectmenu htBlock-selectmenu-fix-width" onchange="listLeaveModeOptions(this.value, &#39;leave_type_mode1&#39;, 1, 1);" name="leave_type_code1" id="leave_type_code1">
<option value="">--</option>
<option style="color:#000000;background-color:#ffffff;" value="1_0_1_0">有休
</option>
<option style="color:#000000;background-color:#ffffff;" value="2_0_0_0">代休
</option>
<option style="color:#000000;background-color:#ffffff;" value="3_0_0_0">欠勤
</option>
<option style="color:#000000;background-color:#ffffff;" value="4_0_0_-1">子の看護休暇
</option>
<option style="color:#000000;background-color:#ffffff;" value="5_0_0_-1">介護休暇
</option>
<option style="color:#000000;background-color:#ffffff;" value="6_0_0_0">産前産後休業
</option>
<option style="color:#000000;background-color:#ffffff;" value="7_0_0_0">育児休業
</option>
<option style="color:#000000;background-color:#ffffff;" value="8_0_0_0">介護休業
</option>
<option style="color:#000000;background-color:#ffffff;" value="9_0_0_0">労災休業
</option>
<option style="color:#000000;background-color:#ffffff;" value="10_0_0_0">公休
</option>
<option style="color:#000000;background-color:#ffffff;" value="11_0_1_0">夏季休暇
</option>
</select>
</div>
<br>
<div class="htBlock-table_alignmentBox leaveByHours">
<label>Vacation Unit:</label>
<select class="htBlock-selectmenu" onchange="enableAddLeaveButtonLeaveByHours(this.value, 1);" style="width: 150px;" name="leave_type_mode1" id="leave_type_mode1">
<option value="">--</option>
</select>
</div>
<div class="htBlock-table_alignmentBoxLarge leaveByHours" id="leave_by_hours_div1" style="display:none;">
<label>Start time:</label>
<select class="htBlock-selectmenu" name="leave_type_start_day1" id="leave_type_start_day1&quot;">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="leave_type_start_hour1" id="leave_type_start_hour1" type="hidden" value="">
<input name="leave_type_start_minute1" id="leave_type_start_minute1" type="hidden" value="">
<input id="leave_type_start_1" name="leave_type_start_1" type="text" placeholder="hhmm" class="htBlock-time schedule_time_value" value="">
</div>
<div class="htBlock-table_alignmentBoxLarge leaveByHours" id="leave_by_hours_div21" style="display:none;">
<label>End time:</label>
<select class="htBlock-selectmenu" name="leave_type_end_day1" id="leave_type_end_day1&quot;">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="leave_type_end_hour1" id="leave_type_end_hour1" type="hidden" value="">
<input name="leave_type_end_minute1" id="leave_type_end_minute1" type="hidden" value="">
<input id="leave_type_end_1" name="leave_type_end_1" type="text" placeholder="hhmm" class="htBlock-time schedule_time_value" value="">
</div>
</div>

<div id="add_leave_template" class="htBlock-variableForm_target" style="display:none;">
<div class="htBlock-table_alignmentBox" id="add_leave_type{{count}}">
<label>Type:</label>
<select class="htBlock-selectmenu htBlock-selectmenu-fix-width" onchange="listLeaveModeOptions(this.value, &#39;leave_type_mode{{count}}&#39;, &#39;{{count}}&#39;, 1);" name="leave_type_code{{count}}" id="leave_type_code{{count}}">
<option value="">--</option>
<option style="color:#000000;background-color:#ffffff;" value="1_0_1_0">有休
</option>
<option style="color:#000000;background-color:#ffffff;" value="4_0_0_-1">子の看護休暇
</option>
<option style="color:#000000;background-color:#ffffff;" value="5_0_0_-1">介護休暇
</option>
<option style="color:#000000;background-color:#ffffff;" value="11_0_1_0">夏季休暇
</option>
</select>
</div>
<br>
<div class="htBlock-table_alignmentBox leaveByHours" id="add_leave_Mode{{count}}">
<label>Vacation Unit:</label>
<select class="htBlock-selectmenu" onchange="enableAddLeaveButtonLeaveByHours(this.value, &#39;{{count}}&#39;);" style="width: 150px;" name="leave_type_mode{{count}}" id="leave_type_mode{{count}}">
<option value="">--</option>
</select>
</div>
<div class="htBlock-table_alignmentBoxLarge leaveByHours" id="leave_by_hours_div{{count}}" style="display:none;">
<label>Start time:</label>
<select class="htBlock-selectmenu" name="leave_type_start_day{{count}}" id="leave_type_start_day{{count}}&quot;">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="leave_type_start_hour{{count}}" id="leave_type_start_hour{{count}}" type="hidden" value="">
<input name="leave_type_start_minute{{count}}" id="leave_type_start_minute{{count}}" type="hidden" value="">
<input id="leave_type_start_{{count}}" name="leave_type_start_{{count}}" type="text" placeholder="hhmm" class="htBlock-time schedule_time_value" value="">
</div>
<div class="htBlock-table_alignmentBoxLarge leaveByHours" id="leave_by_hours_div2{{count}}" style="display:none;">
<label>End time:</label>
<select class="htBlock-selectmenu" name="leave_type_end_day{{count}}" id="leave_type_end_day{{count}}&quot;">
<option value="0">Appointed day</option>
<option value="-1">Previous day</option>
<option value="1">Next day</option>
</select>
<input name="leave_type_end_hour{{count}}" id="leave_type_end_hour{{count}}" type="hidden" value="">
<input name="leave_type_end_minute{{count}}" id="leave_type_end_minute{{count}}" type="hidden" value="">
<input id="leave_type_end_{{count}}" name="leave_type_end_{{count}}" type="text" placeholder="hhmm" class="htBlock-time schedule_time_value" value="">
</div>
</div>

</div>
<div>
<button class="htBlock-buttonS htBlock-buttonPrimary" type="button" id="add_leave_type_button" onclick="addLeaveTypeinputHtml();" style="display:none;">
Add Vacation
</button>
</div>
</td>
</tr>
<!--end - 201806_A-10-->
<input type="hidden" name="time_unit_holiday_counter" id="time_unit_holiday_counter" value="$timeUnitHolidayCounter" style="display: inline-block;">
<input type="hidden" name="leave_type_counter" id="leave_type_counter" value="1" style="display: inline-block;">
<input type="hidden" name="show_half_day_time_unit_fields" id="show_half_day_time_unit_fields" value="false" style="display: inline-block;">
<!-- 時間休暇 -----------------------------------end-------------->
<!-- 残業上限編集 -----------------------------------start------------>
<!-- 残業上限編集 -----------------------------------end-------------->
<!-- 出勤先所属 -----------------------------------start------------>
<tr class="htBlock-table_separator2">
<th title="Select division.">Clock-in division</th>
<td>
<div class="htBlock-table_alignmentBox">
<select class="htBlock-selectmenuBlock htBlock-selectmenu-fix-width" name="scheduled_section_id" id="select_scheduled_section_id">
<option value="" selected=""></option>
<option value="900463197">本社</option>
<option value="900465623">営業部</option>
</select>
</div>
</td>
</tr>
<!-- 出勤先所属 -----------------------------------end-------------->
<!-- 振替出勤 -----------------------------------start------------>
<!-- 振替出勤 -----------------------------------end-------------->
<!-- 自動休憩無効 -----------------------------------start------------>
<tr>
<th title="Select in case of not applying Break specified at Employee type or Pattern.">Disable auto break</th>
<td>
<div class="htBlock-table_alignmentBox">
<select class="htBlock-selectmenuBlock" name="invalid_auto_break_flag" id="select_invalid_auto_break_flag" disabled="" )="">
<option value="" selected="">--</option>
<option value="1">Employee type break</option>
<option value="2">Scheduled break</option>
<option value="3">All auto breaks</option>
</select>
</div>
</td>
</tr>
<tr id="image_upload_table_row" style="display: none;">
<th id="image_upload_header" style="display: none;">Image upload for Vacation Application Request</th>
<td id="image_upload_input_section" style="display: none;">
<label name="max_file_size_msg" id="max_file_size_msg" hidden="" style="display: none;"><b>You can upload Image or PDF file. File size limit is 8 MB</b></label>
<input type="hidden" name="image_upload_form" id="image_upload_form" value="1">
<div id="file_upload_section"></div>
</td>
</tr>
<!-- image upload fields template-->

<!-- 自動休憩無効 -----------------------------------end-------------->
<!-- 汎用フラグ -----------------------------------start------------>
<!-- 汎用フラグ -----------------------------------end-------------->
<!-- 備考　※全権管理者の場合は備考。一般管理者または従業員の場合は申請メッセージを表示する。 -----------------------------------start------------>
<tr>
<th title="Enter Request message in 400 characters or less.
">Request message</th>
<td>
<div class="htBlock-table_alignmentBoxBlock">
<input class="specific-detailText htBlock-text" name="remark" id="remark" type="text" value="" maxlength="400">
</div>
</td>
</tr>
<!-- 備考　※全権管理者の場合は備考。一般管理者または従業員の場合は申請メッセージを表示する。 -----------------------------------end------------>
<!-- 従業員または一般管理者　備考を表示する -----------------------------------start------------>
<tr>
<th title="Enter Note in 400 characters or less.
">Note</th>
<td></td>
</tr>
<!-- 従業員または一般管理者　備考を表示する -----------------------------------end------------>
</tbody>
</table>
</div><!-- end htBlock-expandTable specific-mainTable -->
<div class="htBlock-normalTable specific-calcResult">
<h4 class="htBlock-box_subTitle">
Time calculation results
</h4>
<table class="specific-table_800">
<thead>
<tr>
<th colspan="6">Weekday</th>
<th rowspan="2">Late-in</th>
<th rowspan="2">Early-out</th>
<th rowspan="2">Break</th>
</tr>
<tr>
<th>Fixed</th>
<th>Extra Hours</th>
<th>Overtime</th>
<th>Fixed Late-night hours</th>
<th>Extra Late-night Hours</th>
<th>Late night overtime</th>
</tr>
</thead>
<tbody>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
</div>
 <input name="employee_id" type="hidden" value="902299435">
<input name="schedule_id" type="hidden" value="">
<input name="section_id" type="hidden" value="">
<input name="working_date" type="hidden" value="20231206">
<input name="page_id" type="hidden" value="/working/working_edit">
<input name="update_key" type="hidden" value="0.9005587722792762">
<input name="working_type_id" type="hidden" value="900194789">
<input name="call_from" type="hidden" value="necessity_regulation_page">
<input name="request_one_day_schedule_flag" type="hidden" value="2">
<input name="selected_section_id" type="hidden" id="page_id2" value="$selected_section_id">
<input name="schedule_section_id" type="hidden" value="$schedule_section_id">
<input name="selected_start_date" type="hidden" value="20231206">
<input name="selected_end_date" type="hidden" value="20231206">
<input name="edit_status_code" type="hidden" value="17">
<input name="schedule_request_id" type="hidden" value="">
<input name="old_timerecord_num" type="hidden" value="0">
<div>
<input name="Ycnfmjlm" type="hidden" value="59FzvA5qezsscVQA">
<input name="action_id" type="submit" value="1" id="action_01" style="display: none;">
<button id="button_01" type="button" class=" htBlock-buttonL htBlock-buttonSave specific-saveButtonBottom  " onclick="KOT_GLOBAL.KOT_LIB.onClickActionButton(&#39;action_01&#39;);">
<span>Schedule request</span>
</button>
</div>
<input name="Ycnfmjlm" type="hidden" value="59FzvA5qezsscVQA">
<input name="action_id" class="action notranslate" type="submit" value="3" id="action_03" style="display: none;">
<input name="action_button" class="action_button" type="button" value="Return" id="button_03" style="margin:0px; display:none;" onclick="KOT_GLOBAL.KOT_LIB.onClickActionButton(&#39;action_03&#39;);">
</form>
</div><!-- end htBlock-box specific-box -->
</div><!-- end htBlock-mainContents -->
<div class="htBlock-footer" id="footer_main_menu">

<div class="htBlock-footer_logo">
<img src="./KING OF TIME Attendance Management3_files/footer.png">
</div>
</div>
<script type="text/javascript">
//名前空間を定義
KOT_GLOBAL                           = KOT_GLOBAL || {};
KOT_GLOBAL.Parts                     = KOT_GLOBAL.Parts || {};
KOT_GLOBAL.Parts.VmFooter            = {};
(function($, footer){
})(jQuery, KOT_GLOBAL.Parts.VmFooter);
</script>
<script>
jQuery(".htBlock-adjastableTableF").show();
jQuery(".htBlock-hrCalendarTableA").show();
</script>
<script src="./KING OF TIME Attendance Management3_files/jquery-ui.min.js.download"></script>
<!--<script src="/asset/design1/js/htlib.js?202312121215"></script>-->
<script src="./KING OF TIME Attendance Management3_files/htlib.min.js.download"></script>
<script>
!function () {
if (window.top !== window.self) return;
if ('TechtouchObject' in window && document.querySelector('script#techtouch-snippet')) return;
window.TechtouchObject = {
organizationUuid: "orga-620458be-3899-d201-1631-3d11b80e5568"
};
var e = document.createElement("script"); e.async = 1, e.src = "https://apps.techtouch.jp/script/orga-620458be-3899-d201-1631-3d11b80e5568/main.js?projectUuid=proj-62207a02-2834-745a-4d64-8bf05611f7d2"; e.id = "techtouch-snippet";
var t = document.getElementsByTagName("script")[0]; t.parentNode.insertBefore(e, t);
}()
</script>
</div><!-- end htBlock-body -->


<div id="tudienjp"><div class="o-search-mobile" style="top: 0px; left: 0px; display: none;"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32px" height="32px" viewBox="0 0 40 40" version="1.1"><g id="surface1"><path d="M 39.085938 34.664062 L 29.734375 25.3125 C 31.859375 22.15625 32.910156 18.210938 32.347656 14.007812 C 31.390625 6.859375 25.53125 1.039062 18.375 0.132812 C 7.734375 -1.210938 -1.210938 7.734375 0.132812 18.375 C 1.039062 25.535156 6.859375 31.398438 14.007812 32.351562 C 18.210938 32.914062 22.15625 31.863281 25.3125 29.738281 L 34.664062 39.089844 C 35.886719 40.308594 37.863281 40.308594 39.085938 39.089844 C 40.304688 37.867188 40.304688 35.882812 39.085938 34.664062 Z M 6.179688 16.25 C 6.179688 10.734375 10.664062 6.25 16.179688 6.25 C 21.695312 6.25 26.179688 10.734375 26.179688 16.25 C 26.179688 21.765625 21.695312 26.25 16.179688 26.25 C 10.664062 26.25 6.179688 21.765625 6.179688 16.25 Z M 6.179688 16.25 " style="stroke: none; fill-rule: nonzero; fill: rgb(0, 0, 0); fill-opacity: 1;"></path></g></svg></div><div class="o-popup-tag o-bg-white o-border o-rounded o-shadow" style="width: 400px; top: 0px; left: 0px; display: none;"><div><button type="button" aria-label="Close" class="btn-sm o-btn-close o-position-absolute o-top-0 o-end-0 o-mt-1 o-me-1"></button><ul role="tablist" class="o-nav o-nav-tabs o-pop-nav"><span><svg aria-hidden="true" focusable="false" data-icon="volume-high" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="o-pop-speak o-svg-inline--fa"><path fill="currentColor" d="M533.6 32.5C598.5 85.3 640 165.8 640 256s-41.5 170.8-106.4 223.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C557.5 398.2 592 331.2 592 256s-34.5-142.2-88.7-186.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM473.1 107c43.2 35.2 70.9 88.9 70.9 149s-27.7 113.8-70.9 149c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C475.3 341.3 496 301.1 496 256s-20.7-85.3-53.2-111.8c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zm-60.5 74.5C434.1 199.1 448 225.9 448 256s-13.9 56.9-35.4 74.5c-10.3 8.4-25.4 6.8-33.8-3.5s-6.8-25.4 3.5-33.8C393.1 284.4 400 271 400 256s-6.9-28.4-17.7-37.3c-10.3-8.4-11.8-23.5-3.5-33.8s23.5-11.8 33.8-3.5zM301.1 34.8C312.6 40 320 51.4 320 64V448c0 12.6-7.4 24-18.9 29.2s-25 3.1-34.4-5.3L131.8 352H64c-35.3 0-64-28.7-64-64V224c0-35.3 28.7-64 64-64h67.8L266.7 40.1c9.4-8.4 22.9-10.4 34.4-5.3z"></path></svg></span><li role="presentation" class="o-nav-item"><div data-bs-toggle="tab" aria-selected="true" class="o-nav-link active">Từ vựng</div></li><li role="presentation" class="o-nav-item"><div data-bs-toggle="tab" aria-selected="false" class="o-nav-link">Hán tự</div></li><li role="presentation" class="o-nav-item"><div data-bs-toggle="tab" aria-selected="false" class="o-nav-link">Dịch</div></li></ul><div class="o-selected-result o-pt-1"><div> Đang tìm kiếm ... </div><div class="o-fs-6 o-mt-2" style="line-height: 1.7;"><div class="o-float-start"><div class="o-form-check"><input type="checkbox" id="flexCheckTudienjpLang" class="o-form-check-input"><label for="flexCheckTudienjpLang"> Tiếng Anh </label></div></div><div class="o-float-end o-me-1"><a href="https://tudienjp.com/" target="_blank" class="o-link-secondary o-text-decoration-none">Từ điển JP</a></div></div></div></div></div></div><div id="tudienjpOff"></div><div id="mttContainer" class="bootstrapiso notranslate" data-original-title="Bắt đầu nghỉ giải lao:" title="" dir="ltr" style="transform: translate(496px, 415px);"></div></body></html>