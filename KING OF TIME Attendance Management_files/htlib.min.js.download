!function($){$(function(){"use strict";function padLeft(e,t,a){for(var s=a||"0",n="",i=0;i<t;i++)n+=s;return(s+e).substr(-t)}var log=function(){var e=0;return function(t,a){for(var s="",n=-1;n<e;n++)s+="-";e+=t}}(),ht_i18n={htlib_001:"1月",htlib_002:"2月",htlib_003:"3月",htlib_004:"4月",htlib_005:"5月",htlib_006:"6月",htlib_007:"7月",htlib_008:"8月",htlib_009:"9月",htlib_010:"10月",htlib_011:"11月",htlib_012:"12月",htlib_013:"日",htlib_014:"月",htlib_015:"火",htlib_016:"水",htlib_017:"木",htlib_018:"金",htlib_019:"土",htlib_020:"年",htlib_021:"月",htlib_022:"行をクリックして操作"};KOT_GLOBAL&&KOT_GLOBAL.HT_LIB_I18N&&$.extend(ht_i18n,KOT_GLOBAL.HT_LIB_I18N);var preventDefault=function(e){return e.preventDefault(),e.stopPropagation(),!1},closeByClickOuter=function(e,t,a){$(document).on("click touchend",function(s){if(e()){var n=!0;t($(s.target))&&(n=!1),$(s.target).parents().each(function(){t($(this))&&(n=!1)}),n&&a(s)}})},throttle=function(e,t,a){var s,n=void 0,i=void 0;return function(){var o=arguments;return n||(n=setTimeout(function(){n=void 0},t),s=e.apply(a,o)),i&&clearTimeout(n),i=setTimeout(function(){i=void 0,s=e.apply(a,o)},t),s}},debounce=function(e,t,a){var s=void 0;return function(){s&&clearTimeout(s);var n=arguments;s=setTimeout(function(){s=void 0,e.apply(a,n)},t)}},dialog=function(e,t){var a=$("<div>").addClass(classes.dialog+"_wrapper");$("body").append(a.hide());var s=$(e);s.hide(),this.$target=s,this.$wrapper=a,a.on("DOMMouseScroll mousewheel",preventDefault),s.on("DOMMouseScroll mousewheel",preventDefault),s.find("iframe").contents().on("DOMMouseScroll mousewheel",function(e){if(e.originalEvent.deltaY<0||e.originalEvent.wheelDelta>0){if(0==$(this).scrollTop())return e.preventDefault(),!1}else if((e.originalEvent.deltaY>0||e.originalEvent.wheelDelta<0)&&$(this).height()<=$(this).scrollTop()+s.find("iframe").height())return e.preventDefault(),!1});var n=this;t.buttons?$.each(t.buttons,function(e,a){n.$target.find(a).on("click",t[e])}):$.each(t,function(e,t){$.isFunction(t)&&n.$target.find(selectors.dialog+"_"+e).on("click",t)}),t.closeByOuter&&closeByClickOuter(function(){return n.isShow},function(e){return e.get(0)==n.$target.get(0)},function(){n.close()})};dialog.prototype.isShow=!1,dialog.prototype.hide=dialog.prototype.close=function(){this.$target.hide(),this.$wrapper.hide(),this.isShow=!1},dialog.prototype.open=dialog.prototype.show=function(e){this.$target.show(),this.$wrapper.show();var t=this;setTimeout(function(){t.isShow=!0},0)};var loading={isShown:function(){return $(selectors.loading).length>0},show:function(e){var t=$("<div>");t.attr("class",classes.loading);var a=uniqid();t.attr("data-ht-loading_id",a),t.on("DOMMouseScroll mousewheel",preventDefault);var s=document.createElement("div");s.setAttribute("class",classes.loading+"_loader");var n="http://www.w3.org/2000/svg",i=document.createElementNS(n,"svg");i.setAttributeNS(null,"version","1.1"),i.setAttribute("class",classes.loading+"_circular"),i.setAttribute("viewBox","25 25 50 50");var o=document.createElementNS(n,"circle");return o.setAttribute("class",classes.loading+"_path"),o.setAttributeNS(null,"cx",50),o.setAttributeNS(null,"cy",50),o.setAttributeNS(null,"r",20),i.appendChild(o),s.appendChild(i),t.append(s),e&&t.append($("<div>").addClass(classes.loading+"_message").html(e)),$("body").append(t.fadeIn(250)),a},hide:function(e){e?$('[data-ht-loading_id="'+e+'"]').remove():$(selectors.loading).remove()}},keys=function(){return Object.keys?Object.keys:function(e){var t,a=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.push(t);return a}};window.HtLib={dialog:dialog,loading:loading,keys:keys()};var conf={menuSlideDuration:100,calendarDuration:100},classes={loading:"htBlock-loading",body:"htBlock-body",header:"htBlock-header",hPanel:"htBlock-headerPanel",bPanel:"htBlock-blockPanel",selectmenu:"htBlock-selectmenu",selectmenuBlock:"htBlock-selectmenuBlock",selectmenuS:"htBlock-selectmenuS",selectmenuBlockS:"htBlock-selectmenuBlockS",selectmenuXS:"htBlock-selectmenuXS",selectmenuBlockXS:"htBlock-selectmenuBlockXS",calendar:"htBlock-calendar",calendarW:"htBlock-calendarWeek",calendarM:"htBlock-calendarMonth",aList:"htBlock-alignedList",tab:"htBlock-tab",lTab:"htBlock-linedTab",requestTable:"htBlock-requestTable",selectTable:"htBlock-selectTable",hcTable:"htBlock-hrCalendarTable",hcEditTable:"htBlock-hrCalendarEditTable",vcTable:"htBlock-vrCalendarTable",rexTable:"htBlock-rowExpandTable",sTable:"htBlock-scrollTable",adjastableTable:"htBlock-adjastableTable",eTable:"htBlock-expandTable",inlineTable:"htBlock-inlineTable",normalTable:"htBlock-normalTable",autoNewLineTable:"htBlock-autoNewLineTable",variableForm:"htBlock-variableForm",foldableSection:"htBlock-foldableSection",fixedSubHeader:"htBlock-fixedSubHeader",itemSelector:"htBlock-itemSelector",fileForm:"htBlock-file",dialog:"htBlock-dialog",splitView:"htBlock-splitView",tooltip:"htBlock-tooltip",tooltipHeaderMenu:"htBlock-tooltipHeaderMenu",scrollBox:"htBlock-scrollBox",menuBox:"htBlock-informationMenuBox",informationMenuBox:"htBlock-informationMenuBox",headerMenuBox:"htBlock-header_menuBox",selectOtherMenu:"htBlock-selectOther",fixedToolbar:"htBlock-fixedToolbar"},tables=["requestTable","selectTable","hcTable","vcTable","rexTable","sTable","eTable","inlineTable","normalTable"],selectors={};$.each(classes,function(e,t){selectors[e]="."+t}),$.each(tables,function(e,t){$(selectors[t]).each(function(){$(this).find("table").each(function(){var e=$(this);e.has(">tfoot").addClass(classes[t]+"_withFooter")})})});var getOpts=function(e){var t={},a=$(e).data("htOpt");if(!a)return{};for(var s=a.split(" "),n=0;n<s.length;n++){var i=s[n],o=i.split(":");2==o.length?(t[o[0]]=o[1],"true"==o[1]?t[o[0]]=!0:"false"==o[1]&&(t[o[0]]=!1)):t[i]=!0}return t},_uniqid=1,uniqid=function(){return"htblock-uniqid"+_uniqid++},getUA=function(){return navigator.userAgent},EventEmitter=function(e){this._events={},this._eventsOnce={},e&&e.logging&&(this._logging=!0),e&&e.logprefix?this._logprefix=e.logprefix:this._logprefix=""};EventEmitter.prototype.log=function(e){this._logging},EventEmitter.prototype.off=function(){for(var e=Array.prototype.slice.call(arguments),t=void 0,a=void 0,s=!1,n=0;n<e.length;n++)switch(typeof e[n]){case"string":t=e[n];break;case"number":a=e[n];break;case"boolean":s=e[n];break;case"object":t=e[n].eventName,a=e[n].idx||void 0,s=e[n].once||!1}if(!t)throw"eventName is required";var i;i=s?this._eventsOnce:this._events,this._initEvents(t,i,a)},EventEmitter.prototype._initEvents=function(e,t,a){"undefined"==typeof a?t[e]=[]:t[e][a]=function(){}},EventEmitter.prototype._register=function(e,t,a,s){this.log("regsitered event: "+e+" to "+(s?"eventOnce":"event"));var n;return n=s?this._eventsOnce:this._events,n[e]||this._initEvents(e,n),n[e].push({cb:t,t:a})-1},EventEmitter.prototype.once=function(e,t,a){var s=this._register(e,t,a,!0);return{eventName:e,idx:s,once:!0}},EventEmitter.prototype.on=function(e,t,a){var s=this._register(e,t,a,!1);return{eventName:e,idx:s,once:!1}},EventEmitter.prototype.trigger=EventEmitter.prototype.emit=function(e){this.log("event: "+e+" is emitted");var t=function(e,t,a){setTimeout(function(){if(t[e])for(var s=t[e].length,n=0;n<s;n++){var i=t[e][n];i.cb.apply(i.t,a)}},0)},a=Array.prototype.slice.call(arguments,1);t(e,this._events,a),t(e,this._eventsOnce,a),this._initEvents(e,this._eventsOnce)};var layoutChangeEvent=new EventEmitter,currentCalendarMInst=null,expandTableUIEvent=new EventEmitter,scrollTableUIEvent=new EventEmitter,tabUIEvent=new EventEmitter;setTimeout(function(){function selectWeek(){var e=$(this),t=e.datepicker("getDate");if(t){if(e.data("changeBarrier"))return void setTimeout(function(){e.datepicker("setDate",e.data("startDate"))},1);e.data("changeBarrier",!0);var a=$(this).data("startDate"),s=void 0;a&&(s=a.getDay());var n=0;void 0!=s&&(s>t.getDay()?n=t.getDay()+1+(6-s):s<t.getDay()&&(n=t.getDay()-s));var i=t.getFullYear(),o=t.getMonth(),l=t.getDate()-n,r=new Date(i,o,l),c=new Date(i,o,l+6);e.data("startDate",r),e.data("endDate",c);var d=c.getFullYear()+"/"+padLeft(c.getMonth()+1,2)+"/"+padLeft(c.getDate(),2);e.datepicker("option","dateFormat","yy/mm/dd 〜 "+d),e.datepicker("setDate",r),setTimeout(function(){e.datepicker("setDate",r)},1),e.change()}}function changeWeekCalendarDayClass(e,t,a,s,n){if(0==s)a?$(e).closest("tr").children().removeClass(t):$(e).closest("tr").children().addClass(t);else{var i=e.cellIndex;i<=n?($(e).closest("tr").children().each(function(){this.cellIndex<=n&&(a?$(this).removeClass(t):$(this).addClass(t))}),$(e).closest("tr").prev().children().each(function(){this.cellIndex>=s&&(a?$(this).removeClass(t):$(this).addClass(t))})):($(e).closest("tr").children().each(function(){this.cellIndex>n&&(a?$(this).removeClass(t):$(this).addClass(t))}),$(e).closest("tr").next().children().each(function(){this.cellIndex<s&&(a?$(this).removeClass(t):$(this).addClass(t))}))}}function toHalfWidth(e){var t=e.replace(/[！-～]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)});return t.replace(/”/g,'"').replace(/’/g,"'").replace(/‘/g,"`").replace(/￥/g,"\\").replace(/　/g," ").replace(/〜/g,"~").replace(/・/g,".").replace(/。/g,".")}var $currentMenu,$activeRow;$("body").click(function(){$currentMenu&&$currentMenu.remove()});var initSortHeader=function(e,t){log(1,"initSortHeader");var a=e.find("thead [data-ht-sort-index]"),s=[];return a.each(function(){var e=$(this),a=e.attr("data-ht-sort-index");a&&(s.push(a),e.addClass(t+"_sortDisabled"))}),log(-1,"initSortHeader"),s.filter(function(e,t,a){return a.indexOf(e)===t})},sortRows=function(e,t,a){return function(a){log(1,"sortHeaders");var s=$(this).attr("data-ht-sort-index"),n=$(this).attr("data-ht-sort-type")||"string",i=!$(this).hasClass(e+"_sortByAsc");t.find("."+e+"_sortByAsc").removeClass(e+"_sortByAsc"),t.find("."+e+"_sortByDesc").removeClass(e+"_sortByDesc");var o=t.find('thead [data-ht-sort-index="'+s+'"]');t.find("thead [data-ht-sort-index]").addClass(e+"_sortDisabled"),o.removeClass(e+"_sortDisabled"),i?o.addClass(e+"_sortByAsc"):o.addClass(e+"_sortByDesc");var l=[],r=0,c=function(e,t){return function(){var a=$(this);if(e[r]={sortOrder:0,rows:[],cell:null},0!=a.find("[rowspan]").size())throw"rowspanを含むテーブルはソートできません。";if(e[r].cell=a.find('[data-ht-sort-index="'+t+'"]'),0==e[r].cell.size())throw"tbodyにdata-ht-sort-indexが設定されていません。";var s=a.attr("data-ht-init-sort-order")||e[r].sortOrder;s||(a.attr("data-ht-init-sort-order",r),s=r),e[r].sortOrder=s,e[r].rows.push(a),r++}},d=function(e){var t=[];return $.each(e,function(e,a){$.each(a.rows,function(e,a){t.push(a)})}),t};t.find("tbody tr").each(c(l,s));var h=void 0,f=function(e,t,a){return function(t,s){var n=t.cell.text(),i=s.cell.text(),o=e(n,i);if(a||(o*=-1),0==o)o=t.sortOrder-s.sortOrder;else{if(""===n.trim())return 1;if(""===i.trim())return-1}return o}};switch(n){case"int":h=f(function(e,t){return e=isNaN(parseInt(e))?-Number.MAX_SAFE_INTEGER:parseInt(e),t=isNaN(parseInt(t))?-Number.MAX_SAFE_INTEGER:parseInt(t),e-t},s,i);break;case"float":h=f(function(e,t){return e=isNaN(parseFloat(e))?-Number.MAX_VALUE:parseFloat(e),t=isNaN(parseFloat(t))?-Number.MAX_VALUE:parseFloat(t),e-t},s,i);break;case"string":default:h=f(function(e,t){return e=e.trim(),t=t.trim(),e.localeCompare(t)},s,i)}l.sort(h);var u=d(l);t.find("tbody").empty().append(u),log(-1,"sortHeaders"),initializeSelectOtherMenu()}};$(selectors.adjastableTable+"F").each(function(){function e(){for(var e=n.find("thead th"),t=i.find("thead th"),a=e.length,s=0;s<a;s++){var o=$(e.get(s)),l=o.width(),r=$(t.get(s));r.attr("width",l).css("width",l)}i.width(n.find(selectors.adjastableTable+"F_inner").width())}function t(){i=$("<div>");var e=$("<table>"),t=n.find(selectors.adjastableTable+"F_inner thead").clone();e.append(t),i.append(e),i.removeClass(classes.adjastableTable+"F_inner").addClass(classes.adjastableTable+"F_fixedHeader"),n.append(i.hide()),$(document).scroll(function(){var e=n.find(selectors.adjastableTable+"F_fixedHeader"),t=n.offset(),a=n.height(),i=n.find("thead").height(),o=n.find("tfoot").height(),l=$(document).scrollTop(),r=$(document).scrollLeft();l>t.top-s&&l<t.top+a-i-s-o?(e.show(),e.find("table").css("margin-left",-r)):e.hide()})}var a=$(selectors.header),s=a.height(),n=(getOpts(this),$(this)),i=(n.find(selectors.adjastableTable+"F_inner"),null);t(),e();var o=initSortHeader(n,classes.adjastableTable+"F");n.find("thead [data-ht-sort-index]").on("click",sortRows(classes.adjastableTable+"F",n,o));var l;$(window).resize(function(){l&&clearTimeout(l),l=setTimeout(function(){e()},200)})});var initHorizontalScrollBar=function(e,t,a,s,n){log(1,"initHorizontalScrollBar");var i=18,o=20,l=new EventEmitter;if(s["fixed-horizontal-scrollbar"]){var r=$("<div>").addClass(classes.scrollBox+"_hScroll"),c=$("<a>").addClass(classes.scrollBox+"_leftBtn"),d=$("<a>").addClass(classes.scrollBox+"_rightBtn"),h=$("<div>").addClass(classes.scrollBox+"_scrollBody"),f=$("<div>").addClass(classes.scrollBox+"_scroller");h.append(f),r.append(c),r.append(h),r.append(d),e.append(r);var u=function(){var e=a.getUIWidth(),t=e-2*i;return getUA().match("MSIE")||getUA().match("Trident")?t/(a.getContentWidth()+i):t/(a.getContentWidth()+2)},p=function(e){var t=a.getUIWidth();r.width(t),r.css("left",a.getUIOffset().left-$(document).scrollLeft());var s=t-2*i;h.width(s);var n=u(),o=t*n;return f.width(o),f.css("left",a.getScrollPos()*n+i),e&&preventDefault(e),!1},v=function(e,t){var s=t||a.getScrollPos();a.setScrollPos(Math.max(s-e,0)),p()},b=function(e,t){var s=t||a.getScrollPos();a.setScrollPos(s+e),p()};t.on("scroll",p),c.on("click",function(){v(o)}),d.on("click",function(){b(o)}),h.on("click",function(e){var t=parseInt(f.css("left"))-i,s=f.width(),n=u();e.offsetX<t?a.setScrollPos(e.offsetX/n):s+t<e.offsetX&&a.setScrollPos((e.offsetX-s)/n),p()});var m,_,g=function(){m&&(clearTimeout(m),m=void 0),m=void 0,_&&(clearInterval(_),_=void 0)};c.on("mousedown",function(){g(),m=setTimeout(function(){_=setInterval(function(){v(o)},100)},500)}),d.on("mousedown",function(){g(),m=setTimeout(function(){_=setInterval(function(){b(20)},100)},500)}),c.on("mouseup",g),c.on("mouseout",g),d.on("mouseup",g),d.on("mouseout",g);var T,w;f.on("click",function(e){e.stopPropagation(),e.preventDefault()}),f.on("mousedown",function(e){return T=e.clientX,w=a.getContentWidth()/h.width(),!1}),$(document).on("mousemove",function(e){if(T){var t=(e.clientX-T)*w;b(t),T=e.clientX,p()}}),$(document).on("mouseup",function(e){T=void 0});var C;C=getUA().match("MSIE")||getUA().match("Trident")?500:100;var x,k,B=function(e){var t=a.getUIOffset().top,s=t+a.getUIHeight(),n=$(document).scrollTop(),o=n+$(window).height();if(t+i<o&&s>o){var l=a.getUIWidth(),c=l-2*i,d=u(),h=l*d;h+2>=c?r.hide():r.show()}else r.hide()},S=0,y=0,M=function(){$(window).on("resize",function(e){if(getUA().match("MSIE")||getUA().match("Trident"))x&&clearTimeout(x),x=setTimeout(function(){B(),p(),x=void 0},100);else{var t=void 0;Date.now()-S<C&&t&&(clearTimeout(t),t=void 0),t||(t=setTimeout(function(){B(),p(),S=Date.now(),t=void 0},100))}}),$(document).on("scroll",function(){if(getUA().match("MSIE")||getUA().match("Trident"))k&&clearTimeout(k),k=setTimeout(function(){B(),k=void 0},300);else{var e=void 0;Date.now()-y>C&&(e&&(clearTimeout(e),e=void 0),e||setTimeout(function(){B(),y=Date.now(),e=void 0},100))}})},D=!1;l.on("refresh",function(){log(1,"horizontalScroll refresh"),D||(M(),D=!0),B(),p(),log(-1,"horizontalScroll refresh")}),n||l.emit("refresh")}return log(-1,"initHorizontalScrollBar"),l};$(selectors.scrollBox).each(function(){var e=getOpts(this),t=$(this),a={getUIWidth:function(){return t.width()},getUIHeight:function(){return t.height()},getUIOffset:function(){return t.offset()},getContentWidth:function(){return t.children().width()},getScrollPos:function(){return t.scrollLeft()},setScrollPos:function(e){return t.scrollLeft(e)}};initHorizontalScrollBar(t,t,a,e)}),$(selectors.informationMenuBox).each(function(){var e=$(this),t=e.offset();$(document).on("scroll",function(){$(document).scrollTop()>t.top-20?e.addClass(classes.informationMenuBox+"--fixed"):e.removeClass(classes.informationMenuBox+"--fixed")})}),$(selectors.hcTable).each(function(){var e=$(this).find(selectors.hcTable+"_firstDay").index(),t=$(this).find(selectors.hcTable+"_endDay").index(),a=$(this).find("th"+selectors.hcTable+"_name").index(),s=$(this).find("th"+selectors.hcTable+"_sum").index(),n=$(this).find("th"+selectors.hcTable+"_normalWork").index();$(this).find(selectors.hcTable+"_saturday").index()-e,$(this).find(selectors.hcTable+"_sunday").index()-e;$(this).find("tbody tr").each(function(){$(this).hasClass(classes.hcTable+"_staff");$(this).find("td").each(function(){var i=$(this).index();e<=i&&i<=t&&$(this).addClass(classes.hcTable+"_dayCell"),i==a&&$(this).addClass(classes.hcTable+"_name"),i==s&&$(this).addClass(classes.hcTable+"_sum"),i==n&&$(this).addClass(classes.hcTable+"_normalWork")})})}),$(selectors.hcTable+"A").each(function(){function e(){i=$("<div>").hide();var e=$("<table>"),t=s.find("thead").clone();e.append(t),i.append(e),i.addClass(classes.hcTable+"A_fixedHeader"),a.append(i),$(document).scroll(function(){var e=a.offset(),s=a.height(),n=t.height(),o=$(document).scrollTop();if(o>e.top&&o<e.top+s-n){i.show();var l=$(document).scrollLeft();i.css("margin-left",-l)}else i.hide()})}function t(){for(var e=s.find("thead th"),t=i.find("thead th"),a=e.length,n=0;n<a;n++){var o=$(e.get(n)),l=o.width(),r=$(t.get(n));r.attr("width",l).css("width",l)}i.width(s.width())}var a=$(this),s=a.find("table").addClass(classes.hcTable+"A_main"),n=$(selectors.header),i=(n.height(),null),o=getOpts(this);if(!o["no-fixed"]){e(),t();var l;$(window).resize(function(){l&&clearTimeout(l),l=setTimeout(function(){t()},200)})}}),$(selectors.hcEditTable).each(function(){function e(){i=s.offset().top,o.height(s.height())}function t(){var t=$(document).scrollTop();if(t>i-r)s.addClass(classes.hcEditTable+"_condition--fixed"),o.show();else{var a=!1;s.hasClass(classes.hcEditTable+"_condition--fixed")&&(a=!0),s.removeClass(classes.hcEditTable+"_condition--fixed"),o.hide(),a&&e()}}var a=$(this),s=a.find(selectors.hcEditTable+"_condition"),n=a.find(selectors.hcEditTable+"_content"),i=s.offset().top,o=$("<div>");o.addClass(classes.hcEditTable+"_spacer"),o.height(s.height()),s.after(o.hide());var l=$(selectors.header),r=l.height(),c=n.find("thead > tr").first(),d=c.children("th").attr("rowspan");d>1&&(c=n.find("thead > tr").slice(0,d));var h=0;n.find("tbody tr").each(function(e){var t=$(this);if(e%10==9){var a=c.clone();a.find(".htBlock-checkbox").each(function(){var e=$(this);e.attr("id",e.attr("id")+"__cl"+h+"__");var t=e.next("label");t.attr("for",t.attr("for")+"__cl"+h+"__")}),a.addClass(classes.hcEditTable+"_innerHeader"),t.after(a),h++}}),layoutChangeEvent.on("change",e),$(document).scroll(t),t()});var setExpander=function(e){$("."+e).each(function(){var t=$(this).find("table"),a=t.find("."+e+"_expanderHeader");a.each(function(){var t=getOpts($(this)),a=$(this);if(t["button-open"]){$(this).find("h3").prepend($("<span>").addClass(e+"_icon").addClass(e+"_icon--open"));for(var s=0;s<t.rows;s++)a=a.next(),a.show()}if(t["button-close"]){$(this).find("h3").prepend($("<span>").addClass(e+"_icon").addClass(e+"_icon--close"));for(var s=0;s<t.rows;s++)a=a.next(),a.hide()}}),a.on("click",function(){var t=getOpts(this),a=$(this),s=a.find("."+e+"_icon");s.hasClass(e+"_icon--open")?(s.removeClass(e+"_icon--open"),s.addClass(e+"_icon--close")):(s.addClass(e+"_icon--open"),s.removeClass(e+"_icon--close"));for(var n=0;n<t.rows;n++)a=a.next(),a.slideToggle(conf.menuSlideDuration);layoutChangeEvent.emit("change")})})};setExpander(classes.eTable),setExpander(classes.hcTable);var monthNames=[ht_i18n.htlib_001,ht_i18n.htlib_002,ht_i18n.htlib_003,ht_i18n.htlib_004,ht_i18n.htlib_005,ht_i18n.htlib_006,ht_i18n.htlib_007,ht_i18n.htlib_008,ht_i18n.htlib_009,ht_i18n.htlib_010,ht_i18n.htlib_011,ht_i18n.htlib_012],dayNamesMin=[ht_i18n.htlib_013,ht_i18n.htlib_014,ht_i18n.htlib_015,ht_i18n.htlib_016,ht_i18n.htlib_017,ht_i18n.htlib_018,ht_i18n.htlib_019],datePickerOptByDay={dateFormat:"yy/mm/dd",showOn:"both",buttonImage:"/asset/design1/img/templates/form_icon_calendar_16px.png",buttonImageOnly:!1,duration:conf.calendarDuration,showOptions:{direction:"up"},yearSuffix:ht_i18n.htlib_020,monthNames:monthNames,dayNamesMin:dayNamesMin,showMonthAfterYear:!0,showOtherMonths:!0,selectOtherMonths:!0,beforeShow:function(e,t){$(this).datepicker("widget").addClass(classes.calendar+"_table")}};$(selectors.calendar).datepicker(datePickerOptByDay);var datePickerOptByWeek={dateFormat:"yy/mm/dd",showOn:"both",buttonImage:"/asset/design1/img/templates/form_icon_calendar_16px.png",buttonImageOnly:!1,duration:conf.calendarDuration,showOptions:{direction:"up"},yearSuffix:ht_i18n.htlib_020,monthNames:monthNames,dayNamesMin:dayNamesMin,showMonthAfterYear:!0,showOtherMonths:!0,selectOtherMonths:!0,beforeShow:function(e,t){$(this).datepicker("widget").addClass(classes.calendarW+"_table"),selectWeek.call(this);var a=$(this).data("startDate"),s=$(this).data("endDate"),n=a.getDay(),i=s.getDay();$($(this).datepicker("widget")).on("mouseenter.week_calender_day","table > tbody > tr > td",function(){changeWeekCalendarDayClass(this,"ui-calendar-day_hover",!1,n,i)}),$($(this).datepicker("widget")).on("mouseleave.week_calender_day","table > tbody > tr > td",function(){changeWeekCalendarDayClass(this,"ui-calendar-day_hover",!0,n,i)}),$($(this).datepicker("widget")).on("click.week_calender_day","table > tbody > tr > td",function(){changeWeekCalendarDayClass(this,"ui-calendar-day_select",!1,n,i)}),$(this).data("changeBarrier",!1)},onSelect:selectWeek,onClose:function(){$($(this).datepicker("widget")).off(".week_calender_day","table > tbody > tr > td")},beforeShowDay:function(e){var t=$(this).data("startDate"),a=$(this).data("endDate");return t<=e&&e<=a?[!0,"ui-datepicker-current-day"]:[!0,""]}};$(selectors.calendarW).datepicker(datePickerOptByWeek);var calendarMDateFormat="yy/mm",calendarMDateParse=calendarMDateFormat+"/dd",updateCalendarMDialog=function(e){var t=e.find(selectors.calendarM+"_dialog_year span");t.html($.datepicker.formatDate("yy",e._viewDate));var a=new Date;if(e.find(selectors.calendarM+"_dialog_month--current").removeClass(classes.calendarM+"_dialog_month--current"),e.find(selectors.calendarM+"_dialog_month--active").removeClass(classes.calendarM+"_dialog_month--active"),e._viewDate.getFullYear()==a.getFullYear()){var s=parseInt(a.getMonth());e.find(selectors.calendarM+"_dialog_month"+s).addClass(classes.calendarM+"_dialog_month--current")}if(e._selectedDate&&e._viewDate.getFullYear()==e._selectedDate.getFullYear()){var s=parseInt(e._selectedDate.getMonth());e.find(selectors.calendarM+"_dialog_month"+s).addClass(classes.calendarM+"_dialog_month--active")}},calendarMChangeYear=function(e,t){return function(a){a.stopPropagation(),a.preventDefault(),e._viewDate=new Date(e._viewDate.getFullYear()+t,e._viewDate.getMonth()),updateCalendarMDialog(e)}},selectMonth=function(e,t){return function(a){var s=$(a.target).data("htCalendarMonth");e._selectedDate=new Date(e._viewDate.getFullYear(),s),updateCalendarMDialog(e),t.val($.datepicker.formatDate(calendarMDateFormat,e._selectedDate)),t.change(),setTimeout(function(){closeSelectMonthDialog()},100)}},buildCalendarMDialog=function(e){var t,a,s=$("<div>").addClass(classes.calendarM+"_dialog"),n=e.val();""==n?(s._viewDate=new Date,s._selectedDate=void 0):(s._viewDate=$.datepicker.parseDate(calendarMDateParse,n+"/01")||new Date,s._selectedDate=$.datepicker.parseDate(calendarMDateParse,n+"/01"));var i=$("<div>").addClass(classes.calendarM+"_dialog_header");t=$("<a>").addClass(classes.calendarM+"_dialog_prev"),i.append(t),a=$("<a>").addClass(classes.calendarM+"_dialog_next"),i.append(a);var o=$("<div>").addClass(classes.calendarM+"_dialog_year");o.append($("<span>")),o.append(ht_i18n.htlib_020),i.append(o),s.append(i);for(var l=$("<div>").addClass(classes.calendarM+"_dialog_monthes"),r=0;r<12;r++){var c=$("<a>").addClass(classes.calendarM+"_dialog_month");c.addClass(classes.calendarM+"_dialog_month"+r),c.data("htCalendarMonth",r),c.html(monthNames[r]),l.append(c)}return s.append(l),t.on("click",calendarMChangeYear(s,-1)),a.on("click",calendarMChangeYear(s,1)),s.find(selectors.calendarM+"_dialog_month").on("click",selectMonth(s,e)),s.attr("id",uniqid()),s.css({top:e.offset().top+e.height()+2,left:e.offset().left}),s},closeSelectMonthDialog=function(){currentCalendarMInst.remove(),setTimeout(function(){currentCalendarMInst=null},200)},openSelectMonthDialog=function(e){$("body").find(selectors.calendarM+"_dialog").remove();var t=buildCalendarMDialog(e);updateCalendarMDialog(t),currentCalendarMInst=t.hide(),$("body").append(t),t.fadeIn(100)},toggleSelectMonthDialog=function(e){return function(t){t.preventDefault(),currentCalendarMInst?closeSelectMonthDialog():openSelectMonthDialog(e)}};$(document).mousedown(function(e){if(currentCalendarMInst){var t=$(e.target);t.attr("id")!=currentCalendarMInst.attr("id")&&0==t.parents("#"+currentCalendarMInst.attr("id")).length&&closeSelectMonthDialog()}}),$(selectors.calendarM).each(function(){var e=$("<button>").append($("<img>").attr("src","/asset/design1/img/templates/form_icon_calendar_16px.png")),t=$(this);t.after(e).on("click",toggleSelectMonthDialog(t)),e.on("click",toggleSelectMonthDialog(t))});var calendarLib={refreshDayCalendar:function(e){$(e).removeClass("hasDatepicker");var t=$(e).next();"button"===t.attr("type")&&t.hasClass("ui-datepicker-trigger")&&t.remove(),$(e).datepicker(datePickerOptByDay)},resetDefaultDate:function(e,t){$(e).removeClass("hasDatepicker");var a=$(e).next();"button"===a.attr("type")&&a.hasClass("ui-datepicker-trigger")&&a.remove();var s=$.extend({defaultDate:t},datePickerOptByDay);$(e).datepicker(s)},validateDate:function(e){var t=$(e).val(),a=t.replace(/[０-９ ／]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}),s=a.split("/");if(3==s.length&&$.isNumeric(s[0])&&$.isNumeric(s[1])&&$.isNumeric(s[2])){var n=new Date(s[0],s[1]-1,s[2]);return n.getFullYear()==s[0]&&n.getMonth()==s[1]-1&&n.getDate()==s[2]?(s[1]=("0"+s[1]).substr(-2),s[2]=("0"+s[2]).substr(-2),$(e).val(s[0]+"/"+s[1]+"/"+s[2]),s):null}return null}};window.HtLib=window.HtLib||{},window.HtLib.calendar=calendarLib,$(selectors.aList).each(function(){var e=0;$(this).find("label").each(function(){$(this).width()>e&&(e=$(this).width())}),$(this).find("label").width(e+14)}),$(selectors.variableForm).each(function(){var e=$(this),t=$(this).find(selectors.variableForm+"_target").clone(),a=$(this).find(selectors.variableForm+"_button button");a.on("click",function(){e.find(selectors.variableForm+"_target:last").after(t.clone())})}),$(selectors.fileForm).each(function(){var e=$(this),t=e.find('input[type="file"]');e.append($("<span>").addClass(classes.fileForm+"_filepath")),e.find("button").on("click",function(){t.trigger("click")}),t.on("change",function(){e.find(selectors.fileForm+"_filepath").text($(this).val())})});var blockTimeLib={validateTimeStamp:function(e){$(e).keypress(function(e){if(0===e.which||8===e.which||e.ctrlKey)return!0;var t=String.fromCharCode(e.which);if(13===e.which)$(this).blur();else if("0123456789:０１２３４５６７８９：".indexOf(t,0)<0)return!1}),$(e).blur(function(e){var t=$(this).val().replace(/[０-９ ：]/g,function(e){return String.fromCharCode(e.charCodeAt(0)-65248)}).replace(/:/g,""),a="";Array.prototype.forEach.call(t,function(e){"0123456789:０１２３４５６７８９：".indexOf(e,0)>=0&&(a+=e)}),t=a,3==t.length&&(t="0"+t),4==t.length&&(t=t.slice(0,2)+":"+t.slice(2,4)),$(this).val(t),this.old_time_value!=$(this).val()&&$(this).change()}),$(e).focus(function(e){this.old_time_value=$(this).val(),$(this).val($(this).val().replace(/:/g,""))}),$(e).on("paste",function(e){var t=this;setTimeout(function(){$(t).change()},10)})}};$(".htBlock-time,.htBlock-timeS,.htBlock-timeXS").each(function(e,t){blockTimeLib.validateTimeStamp(t)}),$(document).on("blur",".htBlock-halfWidth",function(e){$(this).val(toHalfWidth($(this).val()))}),window.HtLib=window.HtLib||{},window.HtLib.timestamp=blockTimeLib;var $header=$(selectors.header),$headerMenuButton=$header.find(selectors.header+"_menuButton");$header.find(selectors.header+"_menuBody").hide();var $closeButton=$("<div>");$closeButton.addClass(classes.header+"_menuBody_closeButton"),$header.find(selectors.header+"_menuBody "+selectors.header+"_menuBody_title").append($closeButton);var openHeaderMenu=function(e){e&&preventDefault(e);var t=$header.find(selectors.header+"_menuBody"),a=$("<div>").addClass(classes.header+"_background");$header.before(a.fadeIn(2*conf.menuSlideDuration)),$header.find(selectors.header+"_menuButton").addClass(classes.header+"_menuButton--visible"),t.slideDown(conf.menuSlideDuration)};closeByClickOuter(function(){return $header.find(selectors.header+"_menuBody").is(":visible")},function(e){return e.hasClass(classes.header+"_menuBody")&&!e.hasClass(classes.header+"_menuButton")},function(e){closeHeaderMenu(e)});var closeHeaderMenu=function(e){e&&preventDefault(e);var t=$header.find(selectors.header+"_menuBody");t.slideUp(conf.menuSlideDuration),$header.find(selectors.header+"_menuButton").removeClass(classes.header+"_menuButton--visible"),$(selectors.header+"_background").remove()},toggleHeaderMenu=function(e){$header.find(selectors.header+"_menuBody").is(":visible")?closeHeaderMenu(e):openHeaderMenu(e)};$headerMenuButton.on("click",toggleHeaderMenu),$closeButton.on("click",closeHeaderMenu),$(selectors.fixedSubHeader).each(function(){var e=$(this),t=$(".htBlock-mainContents"),a=$(selectors.header).height();$(document).on("scroll",function(s){if(void 0==e.prevApplyTime&&(e.prevApplyTime=0),!(Date.now()-e.prevApplyTime<100)){var n=t.offset();$(document).scrollTop()+a<n.top&&e.removeClass(classes.fixedSubHeader+"--fixed"),$(document).scrollTop()+a>n.top-e.height()&&e.addClass(classes.fixedSubHeader+"--fixed"),this.prevApplyTime=Date.now()}})});var $headerMenuBox=$(selectors.headerMenuBox),$headerMenuBoxInner=$("<div>");$headerMenuBoxInner.addClass(classes.headerMenuBox+"_inner"),$headerMenuBox.wrapInner($headerMenuBoxInner),$headerMenuBoxInner=$headerMenuBox.find(selectors.headerMenuBox+"_inner");var $headerMenuBoxButtons=$("<div>"),$headerMenuBoxLeft=$("<div>"),$headerMenuBoxRight=$("<div>");$headerMenuBoxButtons.addClass(classes.headerMenuBox+"_buttons"),$headerMenuBoxLeft.addClass(classes.headerMenuBox+"_buttonLeft"),$headerMenuBoxRight.addClass(classes.headerMenuBox+"_buttonRight"),$headerMenuBoxInner.append($headerMenuBoxButtons),$headerMenuBoxButtons.append($headerMenuBoxLeft),$headerMenuBoxButtons.append($headerMenuBoxRight);var menuButtonWidth=36,headerMenuLeft=0;$headerMenuBoxLeft.on("click",function(){headerMenuLeft+=menuButtonWidth,menuScroll(headerMenuLeft)}),$headerMenuBoxRight.on("click",function(){headerMenuLeft-=menuButtonWidth,menuScroll(headerMenuLeft)});var menuButtonsControl=function(){var e=$headerMenuBoxInner.find(">ol"),t=$headerMenuBoxInner.width(),a=e.outerWidth();a-12>t?($headerMenuBoxButtons.show(),$headerMenuBoxInner.addClass(classes.headerMenuBox+"_shortMenu")):($headerMenuBoxButtons.hide(),$headerMenuBoxInner.removeClass(classes.headerMenuBox+"_shortMenu"))};menuButtonsControl();var menuScroll=function(e){var t=$headerMenuBoxInner.find(">ol"),a=$headerMenuBoxInner.width(),s=t.outerWidth();headerMenuLeft=Math.min(headerMenuLeft,0),headerMenuLeft=-Math.min(-headerMenuLeft,s-a),t.css({marginLeft:headerMenuLeft})},resizeCallBack=function(){menuButtonsControl()},menuBoxButtonsTimer;$(window).resize(function(e){menuBoxButtonsTimer&&clearTimeout(menuBoxButtonsTimer),menuBoxButtonsTimer=setTimeout(resizeCallBack,200)}),$(selectors.itemSelector).each(function(){var e=$(this),t=function(e,t){if(getUA().match("MSIE")||getUA().match("Trident")){var a=e.html().replace(/^✔|　/,"");e.html(t+a)}},a=function(e,a){var s="."+a,n=[];e.find(s+"_selected option").each(function(){n.push($(this).val())}),e.find(s+"_selectable option").each(function(){n.indexOf($(this).val())!=-1?($(this).addClass(a+"_selectedItem"),
t($(this),"✔")):($(this).removeClass(a+"_selectedItem"),t($(this),"　"))})},s=function(s,n,i,o){var l="."+n,r=o||s.find(l+"_selectable option:checked");r=r.clone(),r.on("dblclick",function(){$(this).remove(),a(s,n),d(e,classes.itemSelector)}),r.each(function(){$(this).hasClass("static-value")&&$(this).val($(this).val()+"_static"),t($(this),""),!i&&$(this).hasClass(n+"_selectedItem")||s.find(l+"_selected").append($(this).removeClass(n+"_selectedItem"))})},n=function(t,s,n,i,o){var l="."+s,r=$("<option>").val(o).text(n).attr("data-ht-csv-label",i);r.on("dblclick",function(){$(this).remove(),a(t,s),d(e,classes.itemSelector)}),t.find(l+"_selected").append(r)},i=function(e,t){var s="."+t;e.find(s+"_selected option:checked").remove(),a(e,t)},o=function(e,t){var a="."+t,s=e.find(a+"_selected option:checked");e.find(a+"_selected").prepend(s)},l=function(e,t){var a="."+t,s=e.find(a+"_selected option:checked");e.find(a+"_selected").append(s)},r=function(e,t){var a="."+t,s=e.find(a+"_selected option:checked");s.each(function(){$(this).prev().prop("selected")||$(this).prev().before($(this))})},c=function(e,t){var a="."+t,s=$(e.find(a+"_selected option:checked").get().reverse());s.each(function(){$(this).next().prop("selected")||$(this).next().after($(this))})},d=function(e,t){var a="."+t,s=[];e.find(a+"_selected option").each(function(){s.push($(this).data("htCsvLabel"))}),e.find(a+"_preview textarea").text(s.join(","))},h=getOpts(e);a(e,classes.itemSelector),d(e,classes.itemSelector),e.find(selectors.itemSelector+"_add").on("click",function(){s(e,classes.itemSelector,h["allow-add-same-item"]),a(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_remove").on("click",function(){i(e,classes.itemSelector),a(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_selectable option").on("dblclick",function(){s(e,classes.itemSelector,h["allow-add-same-item"],$(this)),a(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_selected option").on("dblclick",function(){$(this).remove(),a(e,classes.itemSelector),d(e,classes.itemSelector)});var f=e.data("htSpaceLabel"),u=e.data("htSpaceCsvLabel");e.find(selectors.itemSelector+"_space").on("click",function(){n(e,classes.itemSelector,f,u,h.spaceval),a(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_top").on("click",function(){o(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_up").on("click",function(){r(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_down").on("click",function(){c(e,classes.itemSelector),d(e,classes.itemSelector)}),e.find(selectors.itemSelector+"_bottom").on("click",function(){l(e,classes.itemSelector),d(e,classes.itemSelector)})});var setupPanel=function(e,t,a,s){var n=$("<div>");n.addClass(t+"_inner"),e.wrapInner(n);var i=$("<span>");i.addClass(t+"_icon");var o=(e.find("h3").prepend(i),function(e,t){return!e.hasClass(t+"--deactive")}),l=function(e,t,a,s){var n="."+t;a&&e.find("h3").find(n+"_valueInTitle").remove(),e.removeClass(t+"--close"),o(e,t)&&(e.find(n+"_content").show(),e.addClass(t+"--open"),setTimeout(function(){layoutChangeEvent.emit("change")},s+100))},r=function(e,t,a,s){var n="."+t;if(e.find(n+"_content").hide(),e.removeClass(t+"--open"),o(e,t)){if(e.addClass(t+"--close"),e.find(n+"_icon").show(),a){var i=$("<label>").addClass(t+"_valueInTitle"),l=[];e.find(n+"_showInTitle").each(function(e,t){l.push($(t).find("option:selected").html())}),i.html(l.join("／")),e.find("h3").append(i)}setTimeout(function(){layoutChangeEvent.emit("change")},s+100)}};e.each(function(){var e=getOpts(this),s=$(this),n=100;$.each(e,function(e,t){switch(e){case"duration":n=parseInt(t)}}),e["no-foldup"]||(s.find("h3").on("click",function(e){s.hasClass(t+"--open")?r(s,t,a,n):l(s,t,a,n)}),void 0!=s.data("htOpen")?l(s,t,a,0):r(s,t,a,0))})};setupPanel($(selectors.hPanel),classes.hPanel,!0,!0),setupPanel($(selectors.bPanel),classes.bPanel,!1,!1),$(selectors.requestTable).each(function(){function e(){var e=t.offset(),a=t.height(),n=s.height(),o=$(document).scrollTop();o>e.top-i&&o<e.top+a-n-i?(s.css("width",t.width()),s.show()):s.hide()}var t=$(this),a=$(this).find(selectors.requestTable+"_header"),s=a.clone(),n=$(selectors.header),i=n.height();s.removeClass(classes.requestTable+"_header").addClass(classes.requestTable+"_fixedHeader"),s.css("display","none"),$(document).scroll(e),$(window).resize(function(){s.css("width",t.width())}),layoutChangeEvent.on("change",function(a){"open"==a&&(s.css("width",t.width()),e())}),t.append(s)}),$(selectors.rexTable).each(function(){var e=$(this),t=function(e,t){var a=getOpts(e),s=t.find(selectors.rexTable+"_foldableRow_showInButton").val();e.find(selectors.rexTable+"_foldSwitch_showValElem").show().text(s),""==s&&e.find(selectors.rexTable+"_foldSwitch_showValElem").hide(),e.find("p button").text(a.label),e.addClass(classes.rexTable+"_foldSwitch--closed"),e.removeClass(classes.rexTable+"_foldSwitch--opened"),t.addClass(classes.rexTable+"_foldableRow--closed"),t.removeClass(classes.rexTable+"_foldableRow--opened"),layoutChangeEvent.emit("change")},a=function(e,t){var a=getOpts(e);e.find("p button").is(":visible")&&(e.find("p button").text(a.closeLabel),e.removeClass(classes.rexTable+"_foldSwitch--closed"),e.addClass(classes.rexTable+"_foldSwitch--opened"),t.removeClass(classes.rexTable+"_foldableRow--closed"),t.addClass(classes.rexTable+"_foldableRow--opened")),layoutChangeEvent.emit("change")},s="tbody "+selectors.rexTable+"_foldSwitch, tbody "+selectors.rexTable+"_foldableRow",n=void 0,i=function(s){return function(n){n.preventDefault();var i=s.attr("data-ht-foldable-row-id"),o=e.find('[data-ht-target-foldable-row-id="'+i+'"]').parents(selectors.rexTable+"_foldSwitch");return o.hasClass(classes.rexTable+"_foldSwitch--opened")?t(o,s):a(o,s),expandTableUIEvent.emit("update"),!1}};e.find(s).each(function(){$(this).hasClass(classes.rexTable+"_foldSwitch")?n=$(this):t(n,$(this))}),$(selectors.rexTable+"_dummyRow").remove();var o;e.find(s).each(function(){if($(this).hasClass(classes.rexTable+"_foldSwitch"))o=uniqid(),n=$(this),n.find("button, a").attr("data-ht-target-foldable-row-id",o);else{var e=$(this);e.attr("data-ht-foldable-row-id",o);var t=$("<tr>").addClass(classes.rexTable+"_dummyRow");e.parent().before(t)}});var l=e.find("thead "+selectors.rexTable+"_foldSwitch a, thead "+selectors.rexTable+"_foldSwitch button");0!=l.size()&&l.prepend("<span>").addClass(classes.rexTable+"_foldSwitch--closed");var r,c=function(){r&&clearTimeout(r),r=setTimeout(function(){0!=l.size()&&(l.off("click"),l.on("click",function(i){i.preventDefault();var o=void 0;return $(this).hasClass(classes.rexTable+"_foldSwitch--closed")?($(this).removeClass(classes.rexTable+"_foldSwitch--closed"),$(this).addClass(classes.rexTable+"_foldSwitch--opened"),o=a):($(this).addClass(classes.rexTable+"_foldSwitch--closed"),$(this).removeClass(classes.rexTable+"_foldSwitch--opened"),o=t),e.find(s).each(function(){if($(this).hasClass(classes.rexTable+"_foldSwitch"))n=$(this);else{var e=$(this);o(n,e)}}),expandTableUIEvent.emit("update"),!1})),e.find("[data-ht-target-foldable-row-id]").each(function(){var t=$(this).attr("data-ht-target-foldable-row-id"),a=e.find('[data-ht-foldable-row-id="'+t+'"]');$(this).off("click"),$(this).on("click",i(a))})},100)};scrollTableUIEvent.on("sort",c),scrollTableUIEvent.on("reset-side",c),c()}),$(selectors.sTable).each(function(){var e,t=$(this),a=getOpts(this),s=!a["disable-fixed-header"],n=!a["disable-fixed-side"],i=0,o=0,l=void 0,r=!1,c=null,d=function(e){if(!n)return 0;if(o)return i;o=!0,setTimeout(function(){o=!1},500);var t=e.find(selectors.sTable+"_main "+selectors.sTable+"_toolbar th:first-of-type");return c||(c=11),r&&(l=t.width()),i=l+c},h=function(e,t){t||(t=e.find(selectors.sTable+"_pin").hasClass(classes.sTable+"_pin--on")?"on":"off");var i=a["pin"+t+"-fixed-col"],o=e.find(selectors.sTable+"_toolbar"),l=o.find("th:first-of-type");l.prop("colspan",i),o.find("th:last-of-type").prop("colspan",U-i),r=!0,n&&setTimeout(function(){var t=d(e),a=e.find(selectors.sTable+"_side");if(s){var n=e.find(selectors.sTable+"_sideHeader");n.css("width",t)}a.css("width",t),L.emit("refresh")},100)},f=function(e){e.find(selectors.sTable+"_header").height(q),e.find(selectors.sTable+"_sideHeader").height(q)},u=function(e,t){var s=e.find(selectors.sTable+"_pin");return n?(+a["pinoff-fixed-col"]<+a["pinon-fixed-col"]?s.show():s.hide(),"on"==t?s.addClass(classes.sTable+"_pin--on").removeClass(classes.sTable+"_pin--off"):s.addClass(classes.sTable+"_pin--off").removeClass(classes.sTable+"_pin--on"),h(e,t),void f(e)):void s.hide()},p=function(){var e=t.find(selectors.sTable+"_pin");e.hasClass(classes.sTable+"_pin--on")?u(t,"off"):u(t,"on"),a["fixed-horizontal-scrollbar"]&&L.emit("refresh")},v=function(e,t){setTimeout(function(){var a=(e.find(selectors.sTable+"_switch--all"),e.find(selectors.sTable+"_switch--part"),["_pin"]);"all"==t?($.each(a,function(t,a){e.find(selectors.sTable+a).show()}),u(e,"off"),e.find("[data-ht-optional-col]").show(),e.addClass(classes.sTable+"--viewAll").removeClass(classes.sTable+"--viewPart"),e.find(selectors.sTable+"_splitter").removeClass(classes.sTable+"_splitter"),e.find(selectors.sTable+"_splitter--atAll").addClass(classes.sTable+"_splitter"),e.find(selectors.sTable+"_splitter--inAll").addClass(classes.sTable+"_splitter")):(u(e,"off"),$.each(a,function(t,a){e.find(selectors.sTable+a).hide()}),e.find("[data-ht-optional-col]").hide(),e.addClass(classes.sTable+"--viewPart").removeClass(classes.sTable+"--viewAll"),e.find(selectors.sTable+"_splitter").removeClass(classes.sTable+"_splitter"),e.find(selectors.sTable+"_splitter--atAll").addClass(classes.sTable+"_splitter"),e.find(selectors.sTable+"_splitter--inPart").addClass(classes.sTable+"_splitter")),e.find("[colspan]").each(function(){var e=getOpts(this);e[t+"-colspan"]&&$(this).prop("colspan",e[t+"-colspan"])}),_(),e.find(selectors.sTable+"_side table").width(e.find(selectors.sTable+"_main table").width())},0)},b=function(){t.hasClass(classes.sTable+"--viewAll")?v(t,"part"):v(t,"all"),a["fixed-horizontal-scrollbar"]&&L.emit("refresh")},m=["_switch--all","_switch--part","_changeCol"],_=function(){var e=t.find(selectors.sTable+"_main"),a=e.find("table").width()-N-e.scrollLeft();$.each(m,function(e,s){t.find(selectors.sTable+s).css({right:a})})},g=function(e){var t=0;return e.find(selectors.sTable+"_main thead tr:not("+selectors.sTable+"_toolbar)").each(function(){return $(this).find("th").each(function(){t+=$(this).prop("colspan")}),!1}),t},T=$(selectors.header),w=44,C=0,x=function(t){var a=$(document).scrollTop();if(C<3){var s=e;s==e?C++:C--,e=s}var n=e;T.size()>0&&(n-=w);var i=n+H-q-t.find(selectors.sTable+"_main tfoot").height(),o=t.find(selectors.sTable+"_header"),l=t.find(selectors.sTable+"_sideHeader");a>n&&a<i?o.hasClass(classes.sTable+"_header--visible")||(o.show(),l.show(),o.addClass(classes.sTable+"_header--visible")):a>i?o.hasClass(classes.sTable+"_header--visible")&&(o.fadeOut(100),l.fadeOut(100),o.removeClass(classes.sTable+"_header--visible")):o.hasClass(classes.sTable+"_header--visible")&&(o.hide(),l.hide(),o.removeClass(classes.sTable+"_header--visible"))},k=function(){var e=t.find("thead [data-ht-sort-index]"),a=[];return e.each(function(){var e=$(this),t=e.attr("data-ht-sort-index");t&&a.push(t)}),a.filter(function(e,t,a){return a.indexOf(e)===t})},B=k(),S=function(){var e=$(this).attr("data-ht-sort-index"),a=$(this).attr("data-ht-sort-type")||"string",s=!$(this).hasClass(classes.sTable+"_sortByAsc");t.find(selectors.sTable+"_sortByAsc").removeClass(classes.sTable+"_sortByAsc"),t.find(selectors.sTable+"_sortByDesc").removeClass(classes.sTable+"_sortByDesc");var n=t.find('thead [data-ht-sort-index="'+e+'"]');s?n.addClass(classes.sTable+"_sortByAsc"):n.addClass(classes.sTable+"_sortByDesc");var i=[],o=[],l=0,r=function(e,t){var a=0;return function(){var s=$(this);a<1&&e[l]&&e[l].cell&&0!=e[l].rows.length&&0!=s.find("[data-ht-sort-index]").size()&&e[l].headers>=B.length&&l++,e[l]||(e[l]={sortOrder:0,rows:[],headers:0,cell:null}),s.find("[rowspan]").each(function(){var e=$(this).attr("rowspan");e&&a<e&&(a=e)});var n=s.find('[data-ht-sort-index="'+t+'"]');0!=n.size()&&(e[l].cell=n),e[l].headers+=s.find("[data-ht-sort-index]").size();var i=s.attr("data-ht-init-sort-order")||e[l].sortOrder;i||(s.attr("data-ht-init-sort-order",l),i=l),e[l].sortOrder=i,e[l].rows.push(s),a--}},c=function(e){var t=[];return $.each(e,function(e,a){$.each(a.rows,function(e,a){t.push(a)})}),t};t.find(selectors.sTable+"_main tbody tr").each(r(i,e)),l=0,t.find(selectors.sTable+"_side tbody tr").each(r(o,e));var d=void 0,h=function(e,t,a){return function(t,s){var n=t.cell.text(),i=s.cell.text(),o=e(n,i);return 0==o&&(o=t[0]-s[0]),a||(o*=-1),o}};switch(a){case"int":d=h(function(e,t){return e=isNaN(e)?1/0:parseInt(e),t=isNaN(t)?1/0:parseInt(t),e-t},e,s);break;case"float":d=h(function(e,t){return e=isNaN(e)?1/0:parseFloat(e),t=isNaN(t)?1/0:parseFloat(t),e-t},e,s);break;case"string":default:d=h(function(e,t){return e.localeCompare(t)},e,s)}i.sort(d),o.sort(d);var f=c(i),u=c(o);t.find(selectors.sTable+"_main tbody").empty().append(f),t.find(selectors.sTable+"_side tbody").empty().append(u),scrollTableUIEvent.emit("sort")};t.addClass(classes.sTable+"--viewAll");var y=$("<div>").css({width:"100%",overflowX:"scroll"}).addClass(classes.sTable+"_main");if(y.scroll(function(){_(),s&&W.find("table").css("left",-$(this).scrollLeft())}),t.find("table").wrap(y),n){var M=$("<div>").addClass(classes.sTable+"_side").append(t.find("table").clone());t.append(M)}var D,E,I,O=t.find(selectors.sTable+"_main");if(a["fixed-horizontal-scrollbar"])var A={getUIWidth:function(){return N-d(t)-2},getUIHeight:function(){return H},getUIOffset:function(){return I||(I={top:e,left:F}),{top:I.top,left:I.left+d(t)+2}},getContentWidth:function(){D||(D=!0,setTimeout(function(){D=!1},100),E=O.children().width());var e=0;return(getUA().match("MSIE")||getUA().match("Trident"))&&(e=20),E-d(t)-2-e},getScrollPos:function(){return O.scrollLeft()},setScrollPos:function(e){return O.scrollLeft(e)}},L=initHorizontalScrollBar(t,O,A,a,!0);var H,N,e,F,U=g(t),P=function(){H=t.height(),N=t.width();var a=t.offset();e=a.top,F=a.left};if(h(t,"off"),v(t,"all"),s){var W=$("<div>").addClass(classes.sTable+"_header").append(t.find(selectors.sTable+"_main table").clone().css({position:"absolute"}));if(n)var z=$("<div>").addClass(classes.sTable+"_sideHeader").append(t.find(selectors.sTable+"_main table").clone().css({position:"absolute"}));W.hide(),n&&z.hide(),t.append(W),n&&t.append(z)}P();var q=void 0;if(s){var q=t.find("thead").height();W.width(N).height(q),n&&z.height(q)}t.find("thead [data-ht-sort-index]").on("click",S),t.find(selectors.sTable+"_pin").on("click",p),t.find(selectors.sTable+"_switch--all").on("click",b),t.find(selectors.sTable+"_switch--part").on("click",b),$(window).on("resize",function(){j.apply(t)});t.find("thead");s&&$(window).on("resize",debounce(function(){P(),t.find(selectors.sTable+"_header").css("width",N)},500));var R,j=function(){R&&clearTimeout(R);var e=this;R=setTimeout(function(){e.find(selectors.sTable+"_side").remove(),M=$("<div>").addClass(classes.sTable+"_side").append(t.find(selectors.sTable+"_main table").clone()),e.find(selectors.sTable+"_main").after(M),e.find(selectors.sTable+"_pin").off("click"),e.find(selectors.sTable+"_pin").on("click",p),h(e),s&&f(e),_(),t.find("thead [data-ht-sort-index]").off("click").on("click",S),scrollTableUIEvent.emit("reset-side")},100)};expandTableUIEvent.on("update",j,t),tabUIEvent.on("update",j,t);var X=0;if(s)if(getUA().match("MSIE")||getUA().match("Trident")){var V;$(document).on("scroll",function(e){V&&clearTimeout(V),Date.now()-X>1e3?(X=Date.now(),x(t),clearTimeout(V)):V=setTimeout(function(){x(t)},200)})}else $(document).on("scroll",function(e){Date.now()-X<100||(x(t),X=Date.now())})}),$(selectors.foldableSection).each(function(){function hideOptional(e,t,a){e.find(selectors.foldableSection+"_detail").hide().css({visibility:"hidden",height:"0"}),t.addClass(classes.foldableSection+"_activeButton"),a.removeClass(classes.foldableSection+"_activeButton"),layoutChangeEvent.emit("change")}function showOptional(e,t,a){e.find(selectors.foldableSection+"_detail").not(selectors.foldableSection+"_detail_excluded").show().css({visibility:"visible",height:"auto"}),a.addClass(classes.foldableSection+"_activeButton"),t.removeClass(classes.foldableSection+"_activeButton"),layoutChangeEvent.emit("change")}function hideContent(e){e.find("ul").hide(),e.find(selectors.foldableSection+"_icon").addClass(classes.foldableSection+"_icon--close"),e.find(selectors.foldableSection+"_icon").removeClass(classes.foldableSection+"_icon--open"),layoutChangeEvent.emit("change")}function showContent(e){e.find("ul").show(),e.find(selectors.foldableSection+"_icon").addClass(classes.foldableSection+"_icon--open"),e.find(selectors.foldableSection+"_icon").removeClass(classes.foldableSection+"_icon--close"),layoutChangeEvent.emit("change")}var $curSection=$(this);if($curSection.find(selectors.foldableSection+"_toggleButton").size()){var $bButton=$(this).find(selectors.foldableSection+"_buttonBasic"),$dButton=$(this).find(selectors.foldableSection+"_buttonDetail"),opts=getOpts(this);"basic"==opts["default"]?(hideOptional($curSection,$bButton,$dButton),opts["on-basic-func"]&&eval(opts["on-basic-func"]+"()")):(showOptional($curSection,$bButton,$dButton),opts["on-detail-func"]&&eval(opts["on-detail-func"]+"()")),$bButton.on("click",function(){hideOptional($curSection,$bButton,$dButton),opts["on-basic-func"]&&eval(opts["on-basic-func"]+"()")}),$dButton.on("click",function(){showOptional($curSection,$bButton,$dButton),opts["on-detail-func"]&&eval(opts["on-detail-func"]+"()")})}else{var $sectionTitle=$curSection.find("> h3"),$iconElem=$(this).find(selectors.foldableSection+"_icon");$iconElem.hasClass(classes.foldableSection+"_icon--close")?$curSection.find("ul").hide():$curSection.find("ul").show(),layoutChangeEvent.emit("change"),$sectionTitle.on("click",function(){$iconElem.hasClass(classes.foldableSection+"_icon--close")?showContent($curSection):hideContent($curSection)})}});var initializeSelectOtherMenu=function(){$(selectors.selectOtherMenu).each(function(){var e=$(this);e.on("change",function(){if($(this).val()){var e=$(this).val();$(this).val(""),$(e).click()}})})};initializeSelectOtherMenu();var checkAllinTable=function($target,prefix,copyClassSuffixes){var selector="."+prefix;$(selector).each(function(){var $cTable=$(this),checkboxIdx=void 0,getChecked=function(e){var t=e.find("tbody "+selector+'_checkbox input[type="checkbox"]'),a=[];return t.each(function(){$(this).is(":checked")&&a.push($(this).val())}),a},checkAll=function($target,check){var $checkbox=$target.find("tbody "+selector+'_checkbox input[type="checkbox"]');$checkbox.prop("checked",check),check?$checkbox.parent().parent().addClass(prefix+"_selected"):$cTable.find(selector+"_selected").removeClass(prefix+"_selected"),$cTable.data("htOnchange")&&eval($cTable.data("htOnchange")+"(["+getChecked($target).toString()+"])")};if($.each(copyClassSuffixes,function(e,t){$cTable.find(selector+t).each(function(){var e=$(this).index();$cTable.find("table tbody tr").each(function(){$(this).find("td").eq(e).addClass(prefix+t)})})}),!getOpts($cTable)["deactive-check-event"]){$cTable.find("table thead th").each(function(){$(this).hasClass(prefix+"_checkbox")&&$(this).find('input[type="checkbox"]').on("change",function(){checkAll($cTable,$(this).prop("checked"))})});var tbCbSelector="table tbody "+selector+'_checkbox input[type="checkbox"]';$cTable.find(tbCbSelector).on("change",function(){$(this).prop("checked")?$(this).parent().parent().addClass(prefix+"_selected"):$(this).parent().parent().removeClass(prefix+"_selected"),$cTable.data("htOnchange")&&eval($cTable.data("htOnchange")+"(["+getChecked($cTable).toString()+"])")})}})};checkAllinTable($(selectors.selectTable),classes.selectTable,["_checkbox"]),checkAllinTable($(selectors.requestTable),classes.requestTable,["_checkbox","_mainRow","_form"]),$(selectors.splitView).each(function(){var e=function(e){e.removeClass(classes.splitView+"_menu_foldable--opened").addClass(classes.splitView+"_menu_foldable--closed"),e.next().slideUp(200)},t=function(e){e.removeClass(classes.splitView+"_menu_foldable--closed").addClass(classes.splitView+"_menu_foldable--opened"),e.next().slideDown(200)};$(this).find(selectors.splitView+"_menu_foldable").addClass(classes.splitView+"_menu_foldable--opened").on("click",function(a){$(a.target).is("button")||($(this).hasClass(classes.splitView+"_menu_foldable--opened")?e($(this)):t($(this)))});var a=$("<div>").addClass(classes.splitView+"_contentsInner");$(this).find(selectors.splitView+"_contents").wrapInner(a)});var tabAction=function(e){$("."+e).each(function(){function t(e){var t=a;e.children().each(function(){var e=$(this),a=e.width();t<a&&(t=a)}),e.width(t)}var a,s=function(){var t=$(this).children("a").attr("href");"#"==t.substring(0,1)&&($(this).removeClass(e+"_item--active"),$(t).hide())},n=$(this),i=n.children("ul");i.children("li").each(function(){var o,l=$(this).children("a").attr("href");"#"==l.substring(0,1)&&(o=$(l),o.addClass(e+"_content"),$(this).on("click",function(a){return a.preventDefault(),$(this).parent().children("li").each(s),n.find("."+e+"_item--active").removeClass(e+"_item--active"),$(this).addClass(e+"_item--active"),t(o),o.show(),tabUIEvent.emit("update"),!1})),o&&o.hide(),a=i.width(),o&&o.show(),$(this).hasClass(e+"_item--active")?o&&e!==classes.lTab&&t(o):s.call(this)})})};tabAction(classes.tab),tabAction(classes.lTab),$(selectors.fixedToolbar).each(function(){function e(){o=a.offset().top,l=a.width()}function t(){var t=$(document).scrollTop();if(t>o-i)a.addClass(classes.fixedToolbar+"--fixed"),a.width(l),s.show();else{var n=!1;a.hasClass(classes.fixedToolbar+"--fixed")&&(n=!0),a.removeClass(classes.fixedToolbar+"--fixed"),a.width(""),s.hide(),n&&e()}}var a=$(this),s=$("<div>");s.addClass(classes.fixedToolbar+"_spacer").height(a.height()),a.after(s.hide());var n=$(selectors.header),i=n.height(),o=a.offset().top,l=a.width();layoutChangeEvent.on("change",e),$(document).scroll(t),t()});var tooltipCreater=function(e,t,a,s){var n=$(e);n.on("mouseover",function(i){e.timer=setTimeout(function(){var i=$(e).attr(a);if(""!=i){var o=uniqid();e.htTooltipId=o;var l=$("<div>").addClass(t),r=$("<div>").addClass(t+"_triangle");l.attr(a+"_id",o);var c=$("<span>");c.html(i),l.append(c),l.append(r);var d=n.offset(),h={top:n.scrollTop(),left:n.scrollLeft()},f=e.offsetWidth,u=e.offsetHeight,p=s?"55px":d.top-h.top+u+8;l.css({left:d.left-h.left+f/2,top:p}),l.fadeIn(200),$("body").append(l)}},100)});var i=function(t){clearTimeout(e.timer),$("["+a+'_id="'+e.htTooltipId+'"]').remove()};n.on("click",i),n.on("mousedown",i),n.on("mouseout",i)};$("[data-ht-tooltip]").each(function(){tooltipCreater(this,classes.tooltip,"data-ht-tooltip")}),$("[data-ht-tooltip-header-menu]").each(function(){tooltipCreater(this,classes.tooltipHeaderMenu,"data-ht-tooltip-header-menu",!0)})},0)})}(jQuery);